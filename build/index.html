<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <title>REL-ID SDK</title>

    <link href="stylesheets/screen.css" rel="stylesheet" type="text/css" media="screen" />
    <link href="stylesheets/print.css" rel="stylesheet" type="text/css" media="print" />
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
      <script src="javascripts/all.js" type="text/javascript"></script>

      <script>
        $(function() {
          setupLanguages(["c","java","objective_c","cpp"]);
        });
      </script>
  </head>

  <body class="index">
    <a href="#" id="nav-button">
      <span>
        NAV
        <img src="images/navbar.png" />
      </span>
    </a>
    <div class="tocify-wrapper">
      <img src="images/logo.png" />
        <div class="lang-selector">
              <a href="#" data-language-name="c">ANSI C</a>
              <a href="#" data-language-name="java">Java</a>
              <a href="#" data-language-name="objective_c">Objective C</a>
              <a href="#" data-language-name="cpp">C++</a>
        </div>
        <div class="search">
          <input type="text" class="search" id="input-search" placeholder="Search">
        </div>
        <ul class="search-results"></ul>
      <div id="toc">
      </div>
        <ul class="toc-footer">
            <li><a href='http://www.uniken.com'>Uniken Website</a></li>
        </ul>
    </div>
    <div class="page-wrapper">
      <div class="dark-box"></div>
      <div class="content">
        <h1 id="introduction">Introduction</h1>

<aside class="notice"><b><u>Disclaimer</u></b> -
<br>
This specification is a <u>working pre-release draft</u>.
</aside>

<p>Welcome to the REL-ID API !</p>

<p>REL-ID is a distributed digital trust platform that connects things - people, networks, devices, applications - securely. It creates a closed, private, massively scalable, app-to-app networking ecosystem to protect enterprise applications and data from unauthorized and fraudulent access, and tampering.</p>

<p>The REL-ID API enables applications to be written to leverage the path-breaking security REL-ID provides. The API SDK is shipped with client-side API libraries, reference implementations and documentation, as well as the server-side REL-ID platform.</p>

<p>The core API is implemented in ANSI C, and has wrappers/bindings for Java (Android), Objective-C (iOS) and C++ (Windows Phone).</p>

<aside class="notice">JavaScript bindings for hybrid application frameworks will be made available in future</aside>

<aside class="notice"><b><u>API-client</u></b><br>
Throughout this documentation, the term <u>API-client</u> refers to an application that embeds and uses the REL-ID API within itself.
</aside>

<p>At a high level, the REL-ID API provides the following features that enable applications to leapfrog ahead in terms of securing themselves - mutual identity and authentication, device fingerprinting and binding, privacy of data, and the digital network adapter (aka DNA). An additional feature of capability to pause and resume the API runtime, on demand, has been provided particularly keeping mobile smartphone device platforms in mind.</p>

<h2 id="mutual-identity-and-authentication">Mutual identity and authentication</h2>

<p><u>Relative Identity</u> (or <u>REL-ID</u> for short) is a mutual identity that encapsulates/represents uniquely, the relationship between 2 parties/entities. This mutual identity is mathematically split in two, and one part each is distributed securely to the communicating parties. The identity of each end-point party/entity is thus relative to the identity of the other end-point party/entity. REL-ID can be used to represent the relationship between user and app, user and user, or app and other app, thus providing a holistic digital identity model</p>

<p>The protocol handshake that authenticates the REL-ID between 2 parties/entities is RMAK – which is short form for ‘<b><u>R</u>EL-ID <u>M</u>utual <u>A</u>uthentication and <u>K</u>ey-exchange</b>’. It is a unique and patented protocol handshake that enables MITM-resistant, true mutual authentication. As specified in the name, key-exchange is a by-product of a successful RMAK handshake and the exchanged keys are used for downstream privacy of communications over the authenticated channel.</p>

<aside class="notice"><i><b><u>Agent REL-ID</u></b> and <b><u>User REL-ID</u></b></i> -
<li>An <u><b>Agent REL-ID</b></u> is used to represent the relationship between software application and the REL-ID platform backend.
<li>An <u><b>User REL-ID</b></u> is used to represent the relationship between end-user of the application and the REL-ID platform backend.
<br>
<i>Note that the REL-ID platform backend represents the enterprise.</i>
</aside>

<h2 id="device-fingerprinting-and-binding">Device fingerprinting and binding</h2>

<p>Every end-point computing device has a number of unique identities associated with it – this includes hardware OEM identities, as well as software identities at both OS platform and application software level. The end-point device’s fingerprint is created by collecting these various identities, and using them together to uniquely identify it. </p>

<p>The REL-ID platform’s multi-factor authentication (MFA) is implemented by binding the device’s fingerprint/identity with the REL-ID of the user/app – thus ensuring that REL-ID-based access is provided only from whitelisted end-point devices (those with identities/fingerprints bound to the relevant REL-IDs).</p>

<h2 id="access-to-backend-enterprise-services">Access to backend enterprise services</h2>

<p>After successful mutual authentication between REL-ID API client-side and REL-ID platform backend (the REL-ID <b>Authentication Gateway</b>), the <b>REL-ID Digital Network Adapter</b> (or <b>RDNA</b> for short) is setup inside the API runtime for enabling secure communications of the API-client application with its enterprise backend services. These services are hidden behind the REL-ID <b>Access Gateway(s)</b> and are accessible ONLY via the RDNA, which possesses the capability to tunnel/relay/patch through application traffic between the client app and its backend services via an Access Gateway.</p>

<p>The backend coordinates of the enterprise services that are accessible for a given software agent REL-ID or user REL-ID are configured into the REL-ID platform on the REL-ID <b>Gateway Manager</b> console. During this configuration, these coordinates are supplied in the form that they are reachable from the REL-ID Access Gateway(s), i.e. using the internally accessible coordinates (IP addresses and port numbers).</p>

<p>The RDNA provides multiple mechanisms to enable this tunneling of traffic - a HTTP proxy facade, and any number of forwarded TCP ports corresponding to backend enterprise service TCP coordinates.</p>

<table><thead>
<tr>
<th>Facade</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>HTTP&nbsp;Proxy</td>
<td>The API-client uses a standard HTTP library to make its HTTP requests, instructing the library to to make the request via the specified HTTP proxy running on local loopback adapter (127.0.0.1/::1)</td>
</tr>
<tr>
<td>Forwarded&nbsp;Port</td>
<td>The API client connects directly to a locally present port which represents the backend enterprise service coordinate</td>
</tr>
</tbody></table>

<h2 id="privacy-of-data">Privacy of Data</h2>

<p>One of the important functionalities the API SDK provides is to encrypt and decrypt application data, on demand. The following scopes of privacy are provided - session-scope, device-scope, user-scope and agent-scope. In all cases, the API-client application can additionally specify cipher-specs for the encryption algorithm and mode to use, as well as specify its own salting vector (or IV).</p>

<table><thead>
<tr>
<th>Privacy Scope</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>Session</td>
<td>The keys used are specific to the REL-ID session and valid for the duration of the session. These keys are primarily used to secure the privacy of data in transit between the API-client application and the REL-ID DNA, as well as between the API-client application and its backend services.</td>
</tr>
<tr>
<td>Device</td>
<td>The keys used are specific to the end-point device. These keys are primarily used by the API-client application to secure the privacy of data that the API-client application might want to persist on the device.</td>
</tr>
<tr>
<td>User</td>
<td>The keys used are specific to the user.</td>
</tr>
<tr>
<td>Agent</td>
<td>The keys used are specific to the agent (i.e. the application using the API)</td>
</tr>
</tbody></table>

<h2 id="pause-resume-of-api-runtime">Pause-resume of API runtime</h2>

<p>Applications written for mobile platforms like Android, iOS and WindowsPhone generally require to handle the &lsquo;OS is pausing your application&rsquo; and the &#39;OS is resuming your application&rsquo; events.</p>

<p>The REL-ID API includes <code class="prettyprint">PauseRuntime</code> and <code class="prettyprint">ResumeRuntime</code> routines that terminate-and-save the runtime state and restore-and-reinitialize the runtime state respectively:</p>

<table><thead>
<tr>
<th>Routine</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>PauseRuntime</td>
<td>Routine that terminates the API runtime, saves a <u><i>private</i></u> copy of the relevant data structures, and returns an encoded dump of the saved information as a null-terminated string.<br><br>When an API-client application is asked to <i>pause</i> itself, it anyway saves its runtime state in a bundle of some kind and persists it (either using OS services, or separately where it knows to look when the application is resumed)<br>At this point, the API-client application must also invoke the <code class="prettyprint">PauseRuntime</code> routine and save the returned string as well.</td>
</tr>
<tr>
<td>ResumeRuntime</td>
<td>Routine that accepts a previously saved <u><i>private</i></u> copy of the API runtime, and restores the API runtime back to the saved state while validating some of the saved state (like session information - validity/life, other information).<br><br>When an API-client application is asked to <i>resume</i> itself, it anyway restores its own runtime status from a previously persisted information bundle of some kind<br><b>BEFORE</b> it does that, it should first restore the previously persisted <i><u>private</u></i> copy of the API runtime state (from a previously executed <code class="prettyprint">PauseRuntime</code>) and invoke the <code class="prettyprint">ResumeRuntime</code> routine passing this state information in to it.</td>
</tr>
</tbody></table>

<h2 id="non-blocking-api">Non-blocking API</h2>

<p>The API is written with non-blocking interactions in mind - none of the API routines will block for any kind of network I/O.</p>

<p>When an API routine requires to perform network I/O with backend services in order to service the API-client, that I/O is delegated to the DNA which is part of the API runtime, and the results are communicated back via callback routines supplied by the API-client. The DNA itself uses non-blocking I/O for all the network communication it performs. </p>

<ul>
<li>Each API routine returns immediately without blocking on any network I/O</li>
<li>Where applicable, API call results are communicated asynchronously via API-client supplied callback routines</li>
</ul>

<h1 id="getting-started">Getting started</h1>

<p>The following table lists and briefly describes the different interactions with the REL-ID API:</p>

<table><thead>
<tr>
<th>Interaction</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><u>Initialization</u></td>
<td>Initialize the API runtime by establishing a REL-ID session and setting up the API runtime, including a DNA instance</td>
</tr>
<tr>
<td><u>User&nbsp;Identity</u></td>
<td>Take the REL-ID session established during <u>Initialization</u> and take it through a bunch of states via this bunch of API routines, to the final SECONDARY (user REL-ID authenticated) state.</td>
</tr>
<tr>
<td><u>Access</u></td>
<td>Provide the API-client application with connectivity to its backend enterprise services via the DNA in the API runtime - to those backend services the REL-ID session has access to.</td>
</tr>
<tr>
<td><u>Data&nbsp;Privacy</u></td>
<td>Provide the API-client application with routines to encrypt and decrypt data, with keys at different scopes, without worrying about key-management.</td>
</tr>
<tr>
<td><u>Pause&nbsp;Resume</u></td>
<td>Save API runtime state and shutdown runtime - subsequently restore runtime state and re-initialize the runtime</td>
</tr>
<tr>
<td><u>Terminate</u></td>
<td>Clean shutdown of the API runtime</td>
</tr>
</tbody></table>

<aside class="notice"><i>The <b><u>User-Identity</u></b> interaction</i> -
<br>
is applicable only when an API-client application uses the REL-ID API for the purpose of its user identity as well. This part of the API is called the REL-ID Advanced API. The rest of the interactions are applicable regardless (i.e. part of the Basic API). In other words, the Advanced API is nothing but the Basic API + User-Identity interaction.
</aside>

<h2 id="initialization">Initialization</h2>

<p>This interaction is governed by a single API routine (<code class="prettyprint">Initialize</code>) invocation that sets the stage for all subsequent interactions. </p>

<p>Most importantly, this is the phase when the <u>API runtime establishes an agent-authenticated session with the REL-ID platform</u> backend and <u>bootstraps the DNA for subsequent connectivity with both REL-ID platform services as well as the configured backend enterprise services</u></p>

<p>The following information is supplied by the API-client application to the initialization routine:</p>

<ul>
<li>Agent information (available as a base64-encoded blob, upon provisioning a new agent REL-ID on a commercially licensed REL-ID Gateway Manager)</li>
<li>Callback methods/functions that the API runtime will use to communicate with the API-client application (status/error notifications, device context/fingerprint retrieval)</li>
<li>Network coordinates of the REL-ID Authentication Gateway (hostname/IP address and port number)</li>
<li>Privacy (encryption) specifications for the Data Privacy APIs - includes cipher specs and salt to use</li>
<li>Opaque reference to the API-client application context (never interpreted/modified by the API runtime, placeholder for application)</li>
<li><i>If applicable</i>, proxy information for connecting through to the REL-ID Auth Gateway</li>
</ul>

<aside class="notice"><i>The <b><u>API-runtime Context</u></b></i> -
<li>While the <u>Initialize</u> API routine returns immediately, it returns an opaque pointer to the API-runtime context which must be supplied with every subsequent call to the API routines. Initialization of this returned context continues, and progress is notified to the API-client via <u>StatusUpdate</u> invocations referring to the same API-runtime context.
<li>Note that the same API-client application process/instance can create multiple API-runtime contexts (via multiple <u>Initialize</u> routine calls) to communicate with different enterprise backend service zones. However, note that this type of usage can fail if the REL-ID platform backend is not appropriately configured.
</aside>

<p>Upon successful initialization, a agent REL-ID-authenticated session is established with the REL-ID platform backend, in a <b>PRIMARY</b> state (i.e. only the software agent has been mutually authenticated, and device has been identified). At this point the application can access backend enterprise services configured into the context of the software agent REL-ID, and not necessarily an user identity.</p>

<aside class="notice"><i>The <b><u>Agent Information</u></b></i> -
<br>
is extremely sensitive data, since it uniquely encapsulates the mutual identity between the API-client application and the REL-ID platform backend. This information must be stored securely by the API-client application. <u>The API-client application must take measures to prevent attackers from reverse engineering this information out of its software binary/runtime</u>. For example, employ a mix of steganography and encryption to securely load and decrypt this information before initializing the REL-ID API runtime.
</aside>

<h2 id="user-identity">User-Identity</h2>

<p>After successful initialization, with the REL-ID session in PRIMARY state, the application can use a bunch of API routines to authenticate the end-user operating the API-client application. This covers user REL-ID activation, binding of device identity to the user REL-ID, credentials update, automated reset of credentials, generation of some one-time-use credentials and notifications to the end-user of information requiring his/her attention/response.</p>

<p>Upon successful user authentication, the REL-ID session moves to a SECONDARY state (i.e. user has been authenticated).</p>

<p>At this point the application access backend enterprise services in the context of the authenticated user REL-ID.</p>

<aside class="notice"><i>The <b><u>Advanced API</u></b></i> -
<br>The user-identity interaction is accessible to the API-client via an additional set of API routines that build on top of the Basic API. Along with the Basic API routines, these additional API routines constitute the <b>REL-ID Advanced API</b>
</aside>

<h2 id="access">Access</h2>

<p>Upon successful initialization/authentication, the ports and facades for the access to different backend enterprise services are provided to the API-runtime to setup the DNA for API-client. This information is returned to the API-runtime every time it creates a REL-ID session - which is after successful initialization (PRIMARY session) and after successful end-user authentication (SECONDARY session). </p>

<p>When the access configuration for a given session changes at the backend, the session is immediately invalidated. This triggers the API-runtime to either renew/recreate its session, causing it to update/refresh the access configuration.</p>

<h2 id="data-privacy">Data Privacy</h2>

<p>One of the important results of successful initialization of the API-runtime, is the distribution of privacy keys at different scopes/levels (Device, Agent, Session). User-level keys are shared with the API-runtime, upon successful end-user authentication. </p>

<p>These keys are not directly shared with the API-client application, but are available for use with encryption and decryption of application data, via a set of privacy routines.</p>

<p>This functionality is not directly related to the exact method of communication between the API-client application, and its backend enterprise services. For example, an API-client application could potentially use these privacy API to encrypt data, and send the cipher-text via SMS/EMAIL/other method to its backend services, whereupon the backend service could interact with REL-ID backend systems (Integration Gateway, in particular), to decrypt and obtain the plain-text data for processing.</p>

<h2 id="pause-resume">Pause-Resume</h2>

<h3 id="pause">Pause</h3>

<p>On mobile platforms, due to limited resource availability, the OS very often puts your application to sleep. When doing this, the OS gives the application a chance to save its state so that it may resume later when it is brought back to the foreground.</p>

<p>The pause API routine requires to be called in such an eventuality, so that the API runtime gets a opportunity to save its state and pass that state back to the API client application for saving to persistent storage on the device.</p>

<p>Typically the pause API routine must be last REL-ID API routine to be called, before saving the application state - along with the API runtime state.</p>

<h3 id="resume">Resume</h3>

<p>When a mobile application has been paused, it must invoke the pause API routine, and save the returned API runtime state information, along with its own state.</p>

<p>When the same application is resumed, in its own resume sequence, it must invoke the resume API routine, passing in the runtime state that it had saved earlier, so that the API can reinitialize and resume its runtime operations.</p>

<p>Typically the resume API routine must be first REL-ID API routine to be called, immediately after loading the previously saved application state - along with the API runtime state.</p>

<h2 id="termination">Termination</h2>

<p>The terminate API routine should be called during application shutdown in order to cleanly terminate the API runtime.</p>

<h1 id="structures-and-enumerations">Structures and Enumerations</h1>

<p>The following subsections list down and explain the different data structures and enumerations that are provided by the REL-ID API. The API-client application developer requires to be familiar with these in order to make effective use of the REL-ID API.</p>

<h2 id="callback-routines-types-structures-interfaces">Callback routines (types, structures, interfaces)</h2>

<p>This structure is supplied to the Initialize routing containing API-client application callback routines. These callback routines are invoked by the API runtime at different points in its execution - for updating status, for requesting the API-client application to supply information etc.</p>

<p>There are 3 primary callback routines that are provided - 2 of them are part of the Basic API and 1 of them is part of the Advanced API.</p>
<pre class="highlight c"><code><span class="cm">/* Invoked by core API runtime to update API-client
   of state changes, exceptions and notifications */</span>
<span class="k">typedef</span>
<span class="kt">int</span> 
<span class="p">(</span><span class="o">*</span><span class="n">fn_status_update_t</span><span class="p">)</span>
<span class="p">(</span><span class="n">core_status_t</span><span class="o">*</span> <span class="n">pStatus</span><span class="p">);</span>

<span class="cm">/* Invoked by core API runtime to retrieve
   device fingerprint identity information */</span>
<span class="k">typedef</span>
<span class="kt">int</span>
<span class="p">(</span><span class="o">*</span><span class="n">fn_get_device_fingerprint_t</span><span class="p">)</span>
<span class="p">(</span><span class="kt">char</span><span class="o">**</span> <span class="n">psDeviceFingerprint</span><span class="p">,</span>
 <span class="kt">void</span><span class="o">*</span>  <span class="n">pvAppCtx</span><span class="p">);</span>

<span class="cm">/* struct of callback pointers */</span>
<span class="k">typedef</span> <span class="k">struct</span> <span class="p">{</span>
  <span class="n">fn_status_update_t</span> <span class="n">pfnStatusUpdate</span><span class="p">;</span>
  <span class="n">fn_get_device_fingerprint_t</span>
                     <span class="n">pfnGetDeviceFingerprint</span><span class="p">;</span>
<span class="p">}</span> <span class="n">core_callbacks_t</span><span class="p">;</span>
</code></pre>
<pre class="highlight java"><code><span class="kd">public</span> <span class="kd">abstract</span> <span class="kd">class</span> <span class="nc">RDNA</span> <span class="o">{</span>
  <span class="c1">//...</span>
  <span class="kd">public</span> <span class="kd">interface</span> <span class="nc">RDNACallbacks</span> <span class="o">{</span>
    <span class="kd">public</span> <span class="kt">int</span> <span class="n">onInitializeCompleted</span><span class="o">(</span><span class="n">RDNAStatusInit</span> <span class="n">status</span><span class="o">);</span>
    <span class="kd">public</span> <span class="n">Object</span> <span class="n">getDeviceContext</span><span class="o">();</span>
    <span class="kd">public</span> <span class="n">String</span> <span class="n">getApplicationFingerprint</span><span class="o">();</span>
    <span class="kd">public</span> <span class="kt">int</span> <span class="n">onTerminate</span><span class="o">(</span><span class="n">RDNAStatusTerminate</span> <span class="n">status</span><span class="o">);</span>
    <span class="kd">public</span> <span class="kt">int</span> <span class="n">onPauseRuntime</span><span class="o">(</span><span class="n">RDNAStatusPause</span> <span class="n">status</span><span class="o">);</span>
    <span class="kd">public</span> <span class="kt">int</span> <span class="n">onResumeRuntime</span><span class="o">(</span><span class="n">RDNAStatusResume</span> <span class="n">status</span><span class="o">);</span>
  <span class="o">}</span>
  <span class="c1">//..</span>
<span class="o">}</span>
</code></pre>
<pre class="highlight objective_c"><code><span class="k">@protocol</span> <span class="nc">RDNACallbacks</span>
  <span class="err">@required</span>
  <span class="o">-</span> <span class="p">(</span><span class="kt">int</span><span class="p">)</span><span class="n">onInitializeCompleted</span><span class="o">:</span><span class="p">(</span><span class="n">RDNAStatusInit</span> <span class="o">*</span><span class="p">)</span><span class="n">status</span><span class="p">;</span>
  <span class="k">@optional</span>
  <span class="o">-</span> <span class="p">(</span><span class="n">NSString</span> <span class="o">*</span><span class="p">)</span><span class="n">getApplicationFingerprint</span><span class="p">;</span>
  <span class="k">-</span> <span class="p">(</span><span class="kt">int</span><span class="p">)</span><span class="nf">onTerminate</span><span class="p">:(</span><span class="n">RDNAStatusTerminate</span> <span class="o">*</span><span class="p">)</span><span class="nv">status</span><span class="p">;</span>
  <span class="k">-</span> <span class="p">(</span><span class="kt">int</span><span class="p">)</span><span class="nf">onPauseRuntime</span><span class="p">:(</span><span class="n">RDNAStatusPauseRuntime</span> <span class="o">*</span><span class="p">)</span><span class="nv">status</span><span class="p">;</span>
  <span class="k">-</span> <span class="p">(</span><span class="kt">int</span><span class="p">)</span><span class="nf">onResumeRuntime</span><span class="p">:(</span><span class="n">RDNAStatusResumeRuntime</span> <span class="o">*</span><span class="p">)</span><span class="nv">status</span><span class="p">;</span>
<span class="k">@end</span>
</code></pre>
<pre class="highlight cpp"><code><span class="k">class</span> <span class="nc">RDNACallbacks</span>
<span class="p">{</span>
  <span class="k">public</span><span class="o">:</span>
  <span class="k">virtual</span> <span class="kt">int</span> <span class="n">onInitializeCompleted</span><span class="p">(</span><span class="n">RDNAStatusInit</span> <span class="n">status</span><span class="p">)</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
  <span class="k">virtual</span> <span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="n">getApplicationFingerprint</span><span class="p">();</span>
  <span class="k">virtual</span> <span class="kt">int</span> <span class="n">onTerminate</span><span class="p">(</span><span class="n">RDNAStatusTerminate</span> <span class="n">status</span><span class="p">);</span>
  <span class="k">virtual</span> <span class="kt">int</span> <span class="n">onPauseRuntime</span><span class="p">(</span><span class="n">RDNAStatusPause</span> <span class="n">status</span><span class="p">);</span>
  <span class="k">virtual</span> <span class="kt">int</span> <span class="n">onResumeRuntime</span><span class="p">(</span><span class="n">RDNAStatusResume</span> <span class="n">status</span><span class="p">);</span>
<span class="p">};</span>
</code></pre>

<table><thead>
<tr>
<th>Callback Routine</th>
<th>Basic/Advanced</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><b>StatusUpdate</b></td>
<td>Basic API</td>
<td>Invoked by the API runtime in order to update the API-client application of the progress of a previously invoked API routine, or state changes and exceptions encountered in general during the course of its execution</td>
</tr>
<tr>
<td><b>GetDeviceFingerprint</b></td>
<td>Basic API (core/ANSI-C)</td>
<td>Invoked by the API runtime during initialization (session creation) in order to retrieve the fingerprint identity of the end-point device</td>
</tr>
<tr>
<td><b>GetDeviceContext</b></td>
<td>Basic API (Java-Android)</td>
<td>Invoked by the API runtime during initialization (session creation) on Android (Java) in order to retrieve the device context reference to be able to determine the fingerprint identity of the end-point device.<br>The API-client must return the Android <u>ApplicationContext</u> of the application from this method&rsquo;s implementation.</td>
</tr>
<tr>
<td><b>GetApplicationFingerprint</b></td>
<td>Basic API (Java/Obj-C/C++)</td>
<td>Invoked by the API runtime during initialization (session creation) in order to retrieve the application fingerprint, supplied by the API-client application to include in the device details.<br>The intent of this routine is to provide the application with an opportunity to identify itself so that the backend can check integrity of the application. To this end, it is recommended that the application provide strong checksums which can be matched/recorded at the backend.</td>
</tr>
</tbody></table>

<p>Apart from the above callback routines, specific events have been called out as onThisHappened() and onThatHappened() callbacks, in the wrapper APIs. This is to make it simpler and clearer for the API-client to react to these events.</p>

<aside class="notice"><i><b><u>GetDeviceFingerprint</u></b> and <b><u>GetDeviceContext</u></b> callback routines</i> -
<br>
<u>GetDeviceFingerprint</u> is the callback defined in the ANSI C core API, while
<br>
<u>GetDeviceContext</u> is the callback defined in the end-point platform specific wrapper APIs for Android (Java).
</aside>

<h2 id="proxy-settings-structure">Proxy settings (structure)</h2>

<p>This structure is supplied to the Initialize routine when the REL-ID Auth Gateway is accessible only from behind an HTTP proxy. For example, when using a REL-ID-integrated application from a device, when connected to a corporate intranet, where connectivity to internet is only via the corporate proxy.</p>

<p>Hence this structure is an optional input parameter to Initialize, and may not always require to be supplied. The API-client application requires to keep track of whether or not this needs to be supplied during initialization - for example by providing a &#39;connect profile settings&rsquo; screen for the end-user.</p>

<p>At an abstract level, the pieces of information supplied by this data structure are:</p>
<pre class="highlight c"><code><span class="k">typedef</span> <span class="k">struct</span> <span class="p">{</span>
  <span class="kt">char</span><span class="o">*</span> <span class="n">sProxyHNIP</span><span class="p">;</span>
  <span class="kt">int</span>   <span class="n">nProxyPort</span><span class="p">;</span>
  <span class="kt">char</span><span class="o">*</span> <span class="n">sUsername</span><span class="p">;</span>
  <span class="kt">char</span><span class="o">*</span> <span class="n">sPassword</span><span class="p">;</span>
<span class="p">}</span> <span class="n">proxy_settings_t</span><span class="p">;</span>
</code></pre>
<pre class="highlight java"><code><span class="kd">public</span> <span class="kd">abstract</span> <span class="kd">class</span> <span class="nc">RDNA</span> <span class="o">{</span>
  <span class="c1">//...</span>
  <span class="kd">public</span> <span class="kd">static</span> <span class="kd">class</span> <span class="nc">RDNAProxySettings</span> <span class="o">{</span>
    <span class="kd">public</span> <span class="n">String</span> <span class="n">proxyHNIP</span><span class="o">;</span>
    <span class="kd">public</span> <span class="kt">int</span> <span class="n">proxyPort</span><span class="o">;</span>
    <span class="kd">public</span> <span class="n">String</span> <span class="n">username</span><span class="o">;</span>
    <span class="kd">public</span> <span class="n">String</span> <span class="n">password</span><span class="o">;</span>
  <span class="o">}</span>
  <span class="c1">//...</span>
<span class="o">}</span>
</code></pre>
<pre class="highlight objective_c"><code><span class="k">@interface</span> <span class="nc">RDNAProxySettings</span> <span class="p">:</span> <span class="nc">NSObject</span>
  <span class="k">@property</span> <span class="p">(</span><span class="n">nonatomic</span><span class="p">,</span> <span class="n">copy</span><span class="p">)</span> <span class="n">NSString</span> <span class="o">*</span><span class="n">proxyHNIP</span><span class="p">;</span>
  <span class="k">@property</span> <span class="p">(</span><span class="n">nonatomic</span><span class="p">)</span> <span class="kt">uint16_t</span> <span class="n">proxyPort</span><span class="p">;</span>
  <span class="k">@property</span> <span class="p">(</span><span class="n">nonatomic</span><span class="p">,</span> <span class="n">copy</span><span class="p">)</span> <span class="n">NSString</span> <span class="o">*</span><span class="n">username</span><span class="p">;</span>
  <span class="k">@property</span> <span class="p">(</span><span class="n">nonatomic</span><span class="p">,</span> <span class="n">copy</span><span class="p">)</span> <span class="n">NSString</span> <span class="o">*</span><span class="n">password</span><span class="p">;</span>
<span class="k">@end</span>
</code></pre>
<pre class="highlight cpp"><code><span class="k">typedef</span> <span class="k">struct</span> <span class="n">RDNAProxySettings_s</span> <span class="p">{</span>
  <span class="n">std</span><span class="o">::</span><span class="n">string</span>    <span class="n">proxyHNIP</span><span class="p">;</span>
  <span class="kt">unsigned</span> <span class="kt">short</span> <span class="n">proxyPort</span><span class="p">;</span>
  <span class="n">std</span><span class="o">::</span><span class="n">string</span>    <span class="n">username</span><span class="p">;</span>
  <span class="n">std</span><span class="o">::</span><span class="n">string</span>    <span class="n">password</span><span class="p">;</span>
<span class="p">}</span> <span class="n">RDNAProxySettings</span><span class="p">;</span>
</code></pre>

<table><thead>
<tr>
<th>Field</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><b>ProxyHNIP</b></td>
<td><b>H</b>ost<b>N</b>ame or <b>IP</b> address of the proxy server</td>
</tr>
<tr>
<td><b>ProxyPort</b></td>
<td>Port number of the proxy server</td>
</tr>
<tr>
<td><b>ProxyUsername</b></td>
<td>The username to use to authenticate with the proxy server. This is required only when the proxy server requires authentication.</td>
</tr>
<tr>
<td><b>ProxyPassword</b></td>
<td>The password to use with the username, to authenticate with the proxy server. This too is required only when the proxy server requires authentication.</td>
</tr>
</tbody></table>

<h2 id="status-update-structures">Status update (structures)</h2>

<p>This structure is supplied to the API-client supplied <code class="prettyprint">StatusUpdate</code> callback routine when it is invoked from the API runtime. This structure covers all possible statuses that the API runtime would notify the API-client application about.</p>

<p>At an abstract level, the pieces of information supplied by this data structure are:</p>
<pre class="highlight c"><code><span class="k">typedef</span> <span class="k">struct</span> <span class="p">{</span>
  <span class="k">union</span> <span class="p">{</span>
    <span class="k">struct</span> <span class="p">{</span>
      <span class="n">core_service_t</span><span class="o">**</span> <span class="n">pServices</span><span class="p">;</span>
      <span class="kt">int</span>              <span class="n">nServices</span><span class="p">;</span>
    <span class="p">}</span> <span class="n">initialize</span><span class="p">;</span>
  <span class="p">}</span> <span class="n">u</span><span class="p">;</span>
<span class="p">}</span> <span class="n">core_args_t</span><span class="p">;</span>

<span class="k">typedef</span> <span class="k">struct</span> <span class="p">{</span>
  <span class="kt">void</span><span class="o">*</span> <span class="n">pvtRuntimeCtx</span><span class="p">;</span>
  <span class="kt">void</span><span class="o">*</span> <span class="n">pvtAppCtx</span><span class="p">;</span>
  <span class="n">e_core_method_t</span> <span class="n">methodID</span><span class="p">;</span>
  <span class="kt">int</span>  <span class="n">errCode</span><span class="p">;</span>
  <span class="n">core_args_t</span><span class="o">*</span> <span class="n">pArgs</span><span class="p">;</span>
<span class="p">}</span> <span class="n">core_status_t</span><span class="p">;</span>
</code></pre>
<pre class="highlight java"><code><span class="kd">public</span> <span class="kd">abstract</span> <span class="kd">class</span> <span class="nc">RDNA</span> <span class="o">{</span>
  <span class="c1">//..</span>
  <span class="kd">public</span> <span class="kd">static</span> <span class="kd">class</span> <span class="nc">RDNAStatusInit</span> <span class="o">{</span>
    <span class="kd">public</span> <span class="n">Object</span> <span class="n">pvtRuntimeCtx</span><span class="o">;</span>
    <span class="kd">public</span> <span class="n">Object</span> <span class="n">pvtAppCtx</span><span class="o">;</span>
    <span class="kd">public</span> <span class="kt">int</span> <span class="n">errCode</span><span class="o">;</span>
    <span class="kd">public</span> <span class="n">RDNAMethodID</span> <span class="n">methodID</span><span class="o">;</span>
    <span class="kd">public</span> <span class="n">RDNAService</span> <span class="n">services</span><span class="o">[];</span>
  <span class="o">}</span>

  <span class="kd">public</span> <span class="kd">static</span> <span class="kd">class</span> <span class="nc">RDNAStatusTerminate</span> <span class="o">{</span>
    <span class="kd">public</span> <span class="n">Object</span> <span class="n">pvtRuntimeCtx</span><span class="o">;</span>
    <span class="kd">public</span> <span class="n">Object</span> <span class="n">pvtAppCtx</span><span class="o">;</span>
    <span class="kd">public</span> <span class="kt">int</span> <span class="n">errCode</span><span class="o">;</span>
    <span class="kd">public</span> <span class="n">RDNAMethodID</span> <span class="n">methodID</span><span class="o">;</span>
  <span class="o">}</span>

  <span class="kd">public</span> <span class="kd">static</span> <span class="kd">class</span> <span class="nc">RDNAStatusPause</span> <span class="o">{</span>
    <span class="kd">public</span> <span class="n">Object</span> <span class="n">pvtRuntimeCtx</span><span class="o">;</span>
    <span class="kd">public</span> <span class="n">Object</span> <span class="n">pvtAppCtx</span><span class="o">;</span>
    <span class="kd">public</span> <span class="kt">int</span> <span class="n">errCode</span><span class="o">;</span>
    <span class="kd">public</span> <span class="n">RDNAMethodID</span> <span class="n">methodID</span><span class="o">;</span>
  <span class="o">}</span>

  <span class="kd">public</span> <span class="kd">static</span> <span class="kd">class</span> <span class="nc">RDNAStatusResume</span> <span class="o">{</span>
    <span class="kd">public</span> <span class="n">Object</span> <span class="n">pvtRuntimeCtx</span><span class="o">;</span>
    <span class="kd">public</span> <span class="n">Object</span> <span class="n">pvtAppCtx</span><span class="o">;</span>
    <span class="kd">public</span> <span class="kt">int</span> <span class="n">errCode</span><span class="o">;</span>
    <span class="kd">public</span> <span class="n">RDNAMethodID</span> <span class="n">methodID</span><span class="o">;</span>
    <span class="kd">public</span> <span class="n">RDNAService</span> <span class="n">services</span><span class="o">[];</span>
  <span class="o">}</span>
  <span class="c1">//..</span>
<span class="o">}</span>
</code></pre>
<pre class="highlight objective_c"><code><span class="k">@interface</span> <span class="nc">RDNAStatusInit</span> <span class="p">:</span> <span class="nc">NSObject</span>
  <span class="k">@property</span> <span class="p">(</span><span class="n">nonatomic</span><span class="p">)</span> <span class="kt">void</span> <span class="o">*</span><span class="n">pvtRuntimeCtx</span><span class="p">;</span>
  <span class="k">@property</span> <span class="p">(</span><span class="n">nonatomic</span><span class="p">)</span> <span class="kt">void</span> <span class="o">*</span><span class="n">pvtAppCtx</span><span class="p">;</span>
  <span class="k">@property</span> <span class="p">(</span><span class="n">nonatomic</span><span class="p">)</span> <span class="kt">int</span> <span class="n">errCode</span><span class="p">;</span>
  <span class="k">@property</span> <span class="p">(</span><span class="n">nonatomic</span><span class="p">)</span> <span class="n">RDNAMethodID</span> <span class="n">methodID</span><span class="p">;</span>
  <span class="k">@property</span> <span class="p">(</span><span class="n">nonatomic</span><span class="p">)</span> <span class="n">NSArray</span> <span class="o">*</span><span class="n">services</span><span class="p">;</span>
<span class="k">@end</span>

<span class="k">@interface</span> <span class="nc">RDNAStatusTerminate</span> <span class="p">:</span> <span class="nc">NSObject</span>
  <span class="k">@property</span> <span class="p">(</span><span class="n">nonatomic</span><span class="p">)</span> <span class="kt">void</span><span class="o">*</span> <span class="n">pvtRuntimeCtx</span><span class="p">;</span>
  <span class="k">@property</span> <span class="p">(</span><span class="n">nonatomic</span><span class="p">)</span> <span class="kt">void</span><span class="o">*</span> <span class="n">pvtAppCtx</span><span class="p">;</span>
  <span class="k">@property</span> <span class="p">(</span><span class="n">nonatomic</span><span class="p">)</span> <span class="kt">int</span> <span class="n">errCode</span><span class="p">;</span>
  <span class="k">@property</span> <span class="p">(</span><span class="n">nonatomic</span><span class="p">)</span> <span class="n">RDNAMethodID</span> <span class="n">methodID</span><span class="p">;</span>
<span class="k">@end</span>

<span class="k">@interface</span> <span class="nc">RDNAStatusPauseRuntime</span> <span class="p">:</span> <span class="nc">NSObject</span>
  <span class="k">@property</span> <span class="p">(</span><span class="n">nonatomic</span><span class="p">)</span> <span class="kt">void</span><span class="o">*</span> <span class="n">pvtRuntimeCtx</span><span class="p">;</span>
  <span class="k">@property</span> <span class="p">(</span><span class="n">nonatomic</span><span class="p">)</span> <span class="kt">void</span><span class="o">*</span> <span class="n">pvtAppCtx</span><span class="p">;</span>
  <span class="k">@property</span> <span class="p">(</span><span class="n">nonatomic</span><span class="p">)</span> <span class="kt">int</span> <span class="n">errCode</span><span class="p">;</span>
  <span class="k">@property</span> <span class="p">(</span><span class="n">nonatomic</span><span class="p">)</span> <span class="n">RDNAMethodID</span> <span class="n">methodID</span><span class="p">;</span>
<span class="k">@end</span>

<span class="k">@interface</span> <span class="nc">RDNAStatusResumeRuntime</span> <span class="p">:</span> <span class="nc">NSObject</span>
  <span class="k">@property</span> <span class="p">(</span><span class="n">nonatomic</span><span class="p">)</span> <span class="kt">void</span> <span class="o">*</span><span class="n">pvtRuntimeCtx</span><span class="p">;</span>
  <span class="k">@property</span> <span class="p">(</span><span class="n">nonatomic</span><span class="p">)</span> <span class="kt">void</span> <span class="o">*</span><span class="n">pvtAppCtx</span><span class="p">;</span>
  <span class="k">@property</span> <span class="p">(</span><span class="n">nonatomic</span><span class="p">)</span> <span class="kt">int</span> <span class="n">errCode</span><span class="p">;</span>
  <span class="k">@property</span> <span class="p">(</span><span class="n">nonatomic</span><span class="p">)</span> <span class="n">RDNAMethodID</span> <span class="n">methodID</span><span class="p">;</span>
  <span class="k">@property</span> <span class="p">(</span><span class="n">nonatomic</span><span class="p">)</span> <span class="n">NSArray</span> <span class="o">*</span><span class="n">services</span><span class="p">;</span>
<span class="k">@end</span>
</code></pre>
<pre class="highlight cpp"><code><span class="k">typedef</span> <span class="k">struct</span> <span class="p">{</span>
  <span class="kt">void</span><span class="o">*</span>        <span class="n">pvtRuntimeCtx</span><span class="p">;</span>
  <span class="kt">void</span><span class="o">*</span>        <span class="n">pvtAppCtx</span><span class="p">;</span>
  <span class="kt">int</span>          <span class="n">errCode</span><span class="p">;</span>
  <span class="n">RDNAMethodID</span> <span class="n">methodID</span><span class="p">;</span>
  <span class="n">vector</span><span class="o">&lt;</span><span class="n">RDNAService</span><span class="o">&gt;</span>
               <span class="n">services</span><span class="p">;</span>
<span class="p">}</span> <span class="n">RDNAStatusInit</span><span class="p">;</span>

<span class="k">typedef</span> <span class="k">struct</span> <span class="p">{</span>
  <span class="kt">void</span><span class="o">*</span>        <span class="n">pvtRuntimeCtx</span><span class="p">;</span>
  <span class="kt">void</span><span class="o">*</span>        <span class="n">pvtAppCtx</span><span class="p">;</span>
  <span class="kt">int</span>          <span class="n">errCode</span><span class="p">;</span>
  <span class="n">RDNAMethodID</span> <span class="n">methodID</span><span class="p">;</span>
<span class="p">}</span> <span class="n">RDNAStatusTerminate</span><span class="p">;</span>

<span class="k">typedef</span> <span class="k">struct</span> <span class="p">{</span>
  <span class="kt">void</span><span class="o">*</span>        <span class="n">pvtRuntimeCtx</span><span class="p">;</span>
  <span class="kt">void</span><span class="o">*</span>        <span class="n">pvtAppCtx</span><span class="p">;</span>
  <span class="kt">int</span>          <span class="n">errCode</span><span class="p">;</span>
  <span class="n">RDNAMethodID</span> <span class="n">methodID</span><span class="p">;</span>
<span class="p">}</span> <span class="n">RDNAStatusPause</span><span class="p">;</span>

<span class="k">typedef</span> <span class="k">struct</span> <span class="p">{</span>
  <span class="kt">void</span><span class="o">*</span>        <span class="n">pvtRuntimeCtx</span><span class="p">;</span>
  <span class="kt">void</span><span class="o">*</span>        <span class="n">pvtAppCtx</span><span class="p">;</span>
  <span class="kt">int</span>          <span class="n">errCode</span><span class="p">;</span>
  <span class="n">RDNAMethodID</span> <span class="n">methodID</span><span class="p">;</span>
  <span class="n">vector</span><span class="o">&lt;</span><span class="n">RDNAService</span><span class="o">&gt;</span>
               <span class="n">services</span><span class="p">;</span>
<span class="p">}</span> <span class="n">RDNAStatusResume</span><span class="p">;</span>
</code></pre>

<table><thead>
<tr>
<th>Field</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><b>RDNA (API&nbsp;runtime) Context</b></td>
<td><code class="prettyprint">pvtRuntimeCtx</code><br>A reference to the RDNA context returned upon successful <code class="prettyprint">Initialize</code> routine invocation. Note that there can technically be multiple such contexts active in the same API-client application - it depends on the application and its purpose.</td>
</tr>
<tr>
<td><b>API-Client (Application) Context</b></td>
<td><code class="prettyprint">pvtAppCtx</code><br>An opaque reference to the API-client supplied context. This is supplied by the API-client to the <code class="prettyprint">Initialize</code> routine, and is associated with the REL-ID DNA context throughout its lifetime. Note that this context is never read/interpreted or modified by the API runtime.</td>
</tr>
<tr>
<td><b>Method&nbsp;ID</b></td>
<td><code class="prettyprint">methodID</code><br>An identifier that specifies which method was invoked by the API-client application.</td>
</tr>
<tr>
<td><b>Error&nbsp;Code</b></td>
<td><code class="prettyprint">errCode</code><br>An identifier that specifies the nature of the error that is being reported in the status update.</td>
</tr>
<tr>
<td><b>Status&nbsp;Arguments</b></td>
<td><li><b>In the Core API (ANSI C)</b>, this is a polymorphic reference to status information - the actual reference to use depends on the method and error identifiers.<li><b>In the Wrapper APIs (Java, Obj-C, C++)<b>, each status structure is separate <i>per event</i>, and hence is one or more members specific to that event&rsquo;s structure</td>
</tr>
</tbody></table>

<p>The wrapper APIs written in high level languages provide similar information of status update in more specific callbacks and structures such as RDNAStatusInit, RDNAStatusPause, etc. This is to make it simpler and clearer for the API-client to react to these events.</p>

<h2 id="error-codes-enum">Error codes (enum)</h2>
<pre class="highlight c"><code><span class="k">typedef</span> <span class="k">enum</span> <span class="p">{</span>
  <span class="n">CORE_ERR_NONE</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>

  <span class="n">CORE_ERR_NOT_INITIALIZED</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
  <span class="n">CORE_ERR_GENERIC_ERROR</span><span class="p">,</span>
  <span class="n">CORE_ERR_INVALID_VERSION</span><span class="p">,</span>
  <span class="n">CORE_ERR_INVALID_ARGS</span><span class="p">,</span>
  <span class="n">CORE_ERR_INVALID_CONTEXT</span><span class="p">,</span>

  <span class="n">CORE_ERR_FAILED_TO_CONNECT_VIA_PROXY</span> <span class="o">=</span> <span class="mi">21</span><span class="p">,</span>
  <span class="n">CORE_ERR_NULL_CALLBACKS</span><span class="p">,</span>
  <span class="n">CORE_ERR_INVALID_HOST</span><span class="p">,</span>
  <span class="n">CORE_ERR_INVALID_PORTNUM</span><span class="p">,</span>
  <span class="n">CORE_ERR_INVALID_AGENT_INFO</span><span class="p">,</span>
  <span class="n">CORE_ERR_FAILED_TO_CONNECT_TO_SERVER</span><span class="p">,</span>
  <span class="n">CORE_ERR_FAILED_TO_AUTHENTICATE</span><span class="p">,</span>
  <span class="n">CORE_ERR_INVALID_SAVED_CONTEXT</span><span class="p">,</span>
  <span class="n">CORE_ERR_INVALID_HTTP_REQUEST</span><span class="p">,</span>
  <span class="n">CORE_ERR_INVALID_HTTP_RESPONSE</span><span class="p">,</span>

  <span class="n">CORE_ERR_INVALID_CIPHERSPECS</span> <span class="o">=</span> <span class="mi">42</span><span class="p">,</span>
  <span class="n">CORE_ERR_PLAINTEXT_EMPTY</span><span class="p">,</span>
  <span class="n">CORE_ERR_PLAINTEXT_LENGTH_INVALID</span><span class="p">,</span>
  <span class="n">CORE_ERR_CIPHERTEXT_EMPTY</span><span class="p">,</span>
  <span class="n">CORE_ERR_CIPHERTEXT_LENGTH_INVALID</span><span class="p">,</span>

  <span class="n">CORE_ERR_SERVICE_NOT_SUPPORTED</span> <span class="o">=</span> <span class="mi">61</span><span class="p">,</span>
  <span class="n">CORE_ERR_INVALID_SERVICE_NAME</span><span class="p">,</span>

  <span class="n">CORE_ERR_FAILED_TO_GET_STREAM_PRIVACYSCOPE</span> <span class="o">=</span> <span class="mi">81</span><span class="p">,</span>
  <span class="n">CORE_ERR_FAILED_TO_GET_STREAM_TYPE</span><span class="p">,</span>
  <span class="n">CORE_ERR_FAILED_TO_WRITE_INTO_STREAM</span><span class="p">,</span>
  <span class="n">CORE_ERR_FAILED_TO_END_STREAM</span><span class="p">,</span>
  <span class="n">CORE_ERR_FAILED_TO_DESTROY_STREAM</span><span class="p">,</span>

  <span class="n">CORE_ERR_FAILED_TO_INITIALIZE</span> <span class="o">=</span> <span class="mi">101</span><span class="p">,</span>
  <span class="n">CORE_ERR_FAILED_TO_PAUSERUNTIME</span><span class="p">,</span>
  <span class="n">CORE_ERR_FAILED_TO_RESUMERUNTIME</span><span class="p">,</span>
  <span class="n">CORE_ERR_FAILED_TO_TERMINATE</span><span class="p">,</span>
  <span class="n">CORE_ERR_FAILED_TO_GET_CIPHERSALT</span><span class="p">,</span>
  <span class="n">CORE_ERR_FAILED_TO_GET_CIPHERSPECS</span><span class="p">,</span>
  <span class="n">CORE_ERR_FAILED_TO_GET_AGENT_INFO</span><span class="p">,</span>
  <span class="n">CORE_ERR_FAILED_TO_GET_SESSION_ID</span><span class="p">,</span>
  <span class="n">CORE_ERR_FAILED_TO_GET_DEVICE_ID</span><span class="p">,</span>
  <span class="n">CORE_ERR_FAILED_TO_GET_SERVICE</span><span class="p">,</span>
  <span class="n">CORE_ERR_FAILED_TO_START_SERVICE</span><span class="p">,</span>
  <span class="n">CORE_ERR_FAILED_TO_STOP_SERVICE</span><span class="p">,</span>
  <span class="n">CORE_ERR_FAILED_TO_ENCRYPT_DATA_PACKET</span><span class="p">,</span>
  <span class="n">CORE_ERR_FAILED_TO_DECRYPT_DATA_PACKET</span><span class="p">,</span>
  <span class="n">CORE_ERR_FAILED_TO_ENCRYPT_HTTP_REQUEST</span><span class="p">,</span>
  <span class="n">CORE_ERR_FAILED_TO_DECRYPT_HTTP_RESPONSE</span><span class="p">,</span>
  <span class="n">CORE_ERR_FAILED_TO_CREATE_PRIVACY_STREAM</span><span class="p">,</span>
<span class="p">}</span> <span class="n">e_core_error_t</span><span class="p">;</span>
</code></pre>
<pre class="highlight java"><code><span class="kd">public</span> <span class="kd">abstract</span> <span class="kd">class</span> <span class="nc">RDNA</span> <span class="o">{</span>
  <span class="c1">//...</span>
  <span class="kd">public</span> <span class="kd">enum</span> <span class="n">RDNAErrorID</span> <span class="o">{</span>
    <span class="n">RDNA_ERR_NONE</span><span class="o">(</span><span class="mi">0</span><span class="o">),</span>

    <span class="n">RDNA_ERR_NOT_INITIALIZED</span><span class="o">(</span><span class="mi">1</span><span class="o">),</span>
    <span class="n">RDNA_ERR_GENERIC_ERROR</span><span class="o">(</span><span class="mi">2</span><span class="o">),</span>
    <span class="n">RDNA_ERR_INVALID_VERSION</span><span class="o">(</span><span class="mi">3</span><span class="o">),</span>
    <span class="n">RDNA_ERR_INVALID_ARGS</span><span class="o">(</span><span class="mi">4</span><span class="o">),</span>
    <span class="n">RDNA_ERR_INVALID_CONTEXT</span><span class="o">(</span><span class="mi">5</span><span class="o">),</span>

    <span class="n">RDNA_ERR_FAILED_TO_CONNECT_VIA_PROXY</span> <span class="o">(</span><span class="mi">21</span><span class="o">),</span>
    <span class="n">RDNA_ERR_NULL_CALLBACKS</span><span class="o">(</span><span class="mi">22</span><span class="o">),</span>
    <span class="n">RDNA_ERR_INVALID_HOST</span><span class="o">(</span><span class="mi">23</span><span class="o">),</span>
    <span class="n">RDNA_ERR_INVALID_PORTNUM</span><span class="o">(</span><span class="mi">24</span><span class="o">),</span>
    <span class="n">RDNA_ERR_INVALID_AGENT_INFO</span><span class="o">(</span><span class="mi">25</span><span class="o">),</span>
    <span class="n">RDNA_ERR_FAILED_TO_CONNECT_TO_SERVER</span><span class="o">(</span><span class="mi">26</span><span class="o">),</span>
    <span class="n">RDNA_ERR_FAILED_TO_AUTHENTICATE</span><span class="o">(</span><span class="mi">27</span><span class="o">),</span>
    <span class="n">RDNA_ERR_INVALID_SAVED_CONTEXT</span><span class="o">(</span><span class="mi">28</span><span class="o">),</span>
    <span class="n">RDNA_ERR_INVALID_HTTP_REQUEST</span><span class="o">(</span><span class="mi">29</span><span class="o">),</span>
    <span class="n">RDNA_ERR_INVALID_HTTP_RESPONSE</span><span class="o">(</span><span class="mi">30</span><span class="o">),</span>

    <span class="n">RDNA_ERR_INVALID_CIPHERSPECS</span><span class="o">(</span><span class="mi">42</span><span class="o">),</span>
    <span class="n">RDNA_ERR_PLAINTEXT_EMPTY</span><span class="o">(</span><span class="mi">43</span><span class="o">),</span>
    <span class="n">RDNA_ERR_PLAINTEXT_LENGTH_INVALID</span><span class="o">(</span><span class="mi">44</span><span class="o">),</span>
    <span class="n">RDNA_ERR_CIPHERTEXT_EMPTY</span><span class="o">(</span><span class="mi">45</span><span class="o">),</span>
    <span class="n">RDNA_ERR_CIPHERTEXT_LENGTH_INVALID</span><span class="o">(</span><span class="mi">46</span><span class="o">),</span>

    <span class="n">RDNA_ERR_SERVICE_NOT_SUPPORTED</span><span class="o">(</span><span class="mi">61</span><span class="o">),</span>
    <span class="n">RDNA_ERR_INVALID_SERVICE_NAME</span><span class="o">(</span><span class="mi">62</span><span class="o">),</span>

    <span class="n">RDNA_ERR_FAILED_TO_GET_STREAM_PRIVACYSCOPE</span><span class="o">(</span><span class="mi">81</span><span class="o">),</span>
    <span class="n">RDNA_ERR_FAILED_TO_GET_STREAM_TYPE</span><span class="o">(</span><span class="mi">82</span><span class="o">),</span>
    <span class="n">RDNA_ERR_FAILED_TO_WRITE_INTO_STREAM</span><span class="o">(</span><span class="mi">83</span><span class="o">),</span>
    <span class="n">RDNA_ERR_FAILED_TO_END_STREAM</span><span class="o">(</span><span class="mi">84</span><span class="o">),</span>
    <span class="n">RDNA_ERR_FAILED_TO_DESTROY_STREAM</span><span class="o">(</span><span class="mi">85</span><span class="o">),</span>

    <span class="n">RDNA_ERR_FAILED_TO_INITIALIZE</span><span class="o">(</span><span class="mi">101</span><span class="o">),</span>
    <span class="n">RDNA_ERR_FAILED_TO_PAUSERUNTIME</span><span class="o">(</span><span class="mi">102</span><span class="o">),</span>
    <span class="n">RDNA_ERR_FAILED_TO_RESUMERUNTIME</span><span class="o">(</span><span class="mi">103</span><span class="o">),</span>
    <span class="n">RDNA_ERR_FAILED_TO_TERMINATE</span><span class="o">(</span><span class="mi">104</span><span class="o">),</span>
    <span class="n">RDNA_ERR_FAILED_TO_GET_CIPHERSALT</span><span class="o">(</span><span class="mi">105</span><span class="o">),</span>
    <span class="n">RDNA_ERR_FAILED_TO_GET_CIPHERSPECS</span><span class="o">(</span><span class="mi">106</span><span class="o">),</span>
    <span class="n">RDNA_ERR_FAILED_TO_GET_AGENT_ID</span><span class="o">(</span><span class="mi">107</span><span class="o">),</span>
    <span class="n">RDNA_ERR_FAILED_TO_GET_SESSION_ID</span><span class="o">(</span><span class="mi">108</span><span class="o">),</span>
    <span class="n">RDNA_ERR_FAILED_TO_GET_DEVICE_ID</span><span class="o">(</span><span class="mi">109</span><span class="o">),</span>
    <span class="n">RDNA_ERR_FAILED_TO_GET_SERVICE</span><span class="o">(</span><span class="mi">110</span><span class="o">),</span>
    <span class="n">RDNA_ERR_FAILED_TO_START_SERVICE</span><span class="o">(</span><span class="mi">111</span><span class="o">),</span>
    <span class="n">RDNA_ERR_FAILED_TO_STOP_SERVICE</span><span class="o">(</span><span class="mi">112</span><span class="o">),</span>
    <span class="n">RDNA_ERR_FAILED_TO_ENCRYPT_DATA_PACKET</span><span class="o">(</span><span class="mi">113</span><span class="o">),</span>
    <span class="n">RDNA_ERR_FAILED_TO_DECRYPT_DATA_PACKET</span><span class="o">(</span><span class="mi">114</span><span class="o">),</span>
    <span class="n">RDNA_ERR_FAILED_TO_ENCRYPT_HTTP_REQUEST</span><span class="o">(</span><span class="mi">115</span><span class="o">),</span>
    <span class="n">RDNA_ERR_FAILED_TO_DECRYPT_HTTP_RESPONSE</span><span class="o">(</span><span class="mi">116</span><span class="o">),</span>
    <span class="n">RDNA_ERR_FAILED_TO_CREATE_PRIVACY_STREAM</span><span class="o">(</span><span class="mi">117</span><span class="o">),</span>
  <span class="o">}</span>
  <span class="c1">//..</span>
<span class="o">}</span>
</code></pre>
<pre class="highlight objective_c"><code><span class="k">typedef</span> <span class="nf">NS_ENUM</span><span class="p">(</span><span class="n">NSInteger</span><span class="p">,</span> <span class="n">RDNAErrorID</span><span class="p">)</span> <span class="p">{</span>
  <span class="n">RDNA_ERR_NONE</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>

  <span class="n">RDNA_ERR_NOT_INITIALIZED</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
  <span class="n">RDNA_ERR_GENERIC_ERROR</span><span class="p">,</span>
  <span class="n">RDNA_ERR_INVALID_VERSION</span><span class="p">,</span>
  <span class="n">RDNA_ERR_INVALID_ARGS</span><span class="p">,</span>
  <span class="n">RDNA_ERR_INVALID_CONTEXT</span><span class="p">,</span>

  <span class="n">RDNA_ERR_FAILED_TO_CONNECT_VIA_PROXY</span> <span class="o">=</span> <span class="mi">21</span><span class="p">,</span>
  <span class="n">RDNA_ERR_NULL_CALLBACKS</span><span class="p">,</span>
  <span class="n">RDNA_ERR_INVALID_HOST</span><span class="p">,</span>
  <span class="n">RDNA_ERR_INVALID_PORTNUM</span><span class="p">,</span>
  <span class="n">RDNA_ERR_INVALID_AGENT_INFO</span><span class="p">,</span>
  <span class="n">RDNA_ERR_FAILED_TO_CONNECT_TO_SERVER</span><span class="p">,</span>
  <span class="n">RDNA_ERR_FAILED_TO_AUTHENTICATE</span><span class="p">,</span>
  <span class="n">RDNA_ERR_INVALID_SAVED_CONTEXT</span><span class="p">,</span>
  <span class="n">RDNA_ERR_INVALID_HTTP_REQUEST</span><span class="p">,</span>
  <span class="n">RDNA_ERR_INVALID_HTTP_RESPONSE</span><span class="p">,</span>

  <span class="n">RDNA_ERR_INVALID_CIPHERSPECS</span> <span class="o">=</span> <span class="mi">42</span><span class="p">,</span>
  <span class="n">RDNA_ERR_PLAINTEXT_EMPTY</span><span class="p">,</span>
  <span class="n">RDNA_ERR_PLAINTEXT_LENGTH_INVALID</span><span class="p">,</span>
  <span class="n">RDNA_ERR_CIPHERTEXT_EMPTY</span><span class="p">,</span>
  <span class="n">RDNA_ERR_CIPHERTEXT_LENGTH_INVALID</span><span class="p">,</span>

  <span class="n">RDNA_ERR_SERVICE_NOT_SUPPORTED</span> <span class="o">=</span> <span class="mi">61</span><span class="p">,</span>
  <span class="n">RDNA_ERR_INVALID_SERVICE_NAME</span><span class="p">,</span>

  <span class="n">RDNA_ERR_FAILED_TO_GET_STREAM_PRIVACYSCOPE</span> <span class="o">=</span> <span class="mi">81</span><span class="p">,</span>
  <span class="n">RDNA_ERR_FAILED_TO_GET_STREAM_TYPE</span><span class="p">,</span>
  <span class="n">RDNA_ERR_FAILED_TO_WRITE_INTO_STREAM</span><span class="p">,</span>
  <span class="n">RDNA_ERR_FAILED_TO_END_STREAM</span><span class="p">,</span>
  <span class="n">RDNA_ERR_FAILED_TO_DESTROY_STREAM</span><span class="p">,</span>

  <span class="n">RDNA_ERR_FAILED_TO_INITIALIZE</span> <span class="o">=</span> <span class="mi">101</span><span class="p">,</span>
  <span class="n">RDNA_ERR_FAILED_TO_PAUSERUNTIME</span><span class="p">,</span>
  <span class="n">RDNA_ERR_FAILED_TO_RESUMERUNTIME</span><span class="p">,</span>
  <span class="n">RDNA_ERR_FAILED_TO_TERMINATE</span><span class="p">,</span>
  <span class="n">RDNA_ERR_FAILED_TO_GET_CIPHERSALT</span><span class="p">,</span>
  <span class="n">RDNA_ERR_FAILED_TO_GET_CIPHERSPECS</span><span class="p">,</span>
  <span class="n">RDNA_ERR_FAILED_TO_GET_AGENT_INFO</span><span class="p">,</span>
  <span class="n">RDNA_ERR_FAILED_TO_GET_SESSION_ID</span><span class="p">,</span>
  <span class="n">RDNA_ERR_FAILED_TO_GET_DEVICE_ID</span><span class="p">,</span>
  <span class="n">RDNA_ERR_FAILED_TO_GET_SERVICE</span><span class="p">,</span>
  <span class="n">RDNA_ERR_FAILED_TO_START_SERVICE</span><span class="p">,</span>
  <span class="n">RDNA_ERR_FAILED_TO_STOP_SERVICE</span><span class="p">,</span>
  <span class="n">RDNA_ERR_FAILED_TO_ENCRYPT_DATA_PACKET</span><span class="p">,</span>
  <span class="n">RDNA_ERR_FAILED_TO_DECRYPT_DATA_PACKET</span><span class="p">,</span>
  <span class="n">RDNA_ERR_FAILED_TO_ENCRYPT_HTTP_REQUEST</span><span class="p">,</span>
  <span class="n">RDNA_ERR_FAILED_TO_DECRYPT_HTTP_RESPONSE</span><span class="p">,</span>
  <span class="n">RDNA_ERR_FAILED_TO_CREATE_PRIVACY_STREAM</span><span class="p">,</span>
<span class="p">};</span>
</code></pre>
<pre class="highlight cpp"><code><span class="k">typedef</span> <span class="k">enum</span> <span class="p">{</span>
  <span class="n">RDNA_ERR_NONE</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>

  <span class="n">RDNA_ERR_NOT_INITIALIZED</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
  <span class="n">RDNA_ERR_GENERIC_ERROR</span><span class="p">,</span>
  <span class="n">RDNA_ERR_INVALID_VERSION</span><span class="p">,</span>
  <span class="n">RDNA_ERR_INVALID_ARGS</span><span class="p">,</span>
  <span class="n">RDNA_ERR_INVALID_CONTEXT</span><span class="p">,</span>

  <span class="n">RDNA_ERR_FAILED_TO_CONNECT_VIA_PROXY</span> <span class="o">=</span> <span class="mi">21</span><span class="p">,</span>
  <span class="n">RDNA_ERR_NULL_CALLBACKS</span><span class="p">,</span>
  <span class="n">RDNA_ERR_INVALID_HOST</span><span class="p">,</span>
  <span class="n">RDNA_ERR_INVALID_PORTNUM</span><span class="p">,</span>
  <span class="n">RDNA_ERR_INVALID_AGENT_INFO</span><span class="p">,</span>
  <span class="n">RDNA_ERR_FAILED_TO_CONNECT_TO_SERVER</span><span class="p">,</span>
  <span class="n">RDNA_ERR_FAILED_TO_AUTHENTICATE</span><span class="p">,</span>
  <span class="n">RDNA_ERR_INVALID_SAVED_CONTEXT</span><span class="p">,</span>
  <span class="n">RDNA_ERR_INVALID_HTTP_REQUEST</span><span class="p">,</span>
  <span class="n">RDNA_ERR_INVALID_HTTP_RESPONSE</span><span class="p">,</span>

  <span class="n">RDNA_ERR_INVALID_CIPHERSPECS</span> <span class="o">=</span> <span class="mi">42</span><span class="p">,</span>
  <span class="n">RDNA_ERR_PLAINTEXT_EMPTY</span><span class="p">,</span>
  <span class="n">RDNA_ERR_PLAINTEXT_LENGTH_INVALID</span><span class="p">,</span>
  <span class="n">RDNA_ERR_CIPHERTEXT_EMPTY</span><span class="p">,</span>
  <span class="n">RDNA_ERR_CIPHERTEXT_LENGTH_INVALID</span><span class="p">,</span>

  <span class="n">RDNA_ERR_SERVICE_NOT_SUPPORTED</span> <span class="o">=</span> <span class="mi">61</span><span class="p">,</span>
  <span class="n">RDNA_ERR_INVALID_SERVICE_NAME</span><span class="p">,</span>

  <span class="n">RDNA_ERR_FAILED_TO_GET_STREAM_PRIVACYSCOPE</span> <span class="o">=</span> <span class="mi">81</span><span class="p">,</span>
  <span class="n">RDNA_ERR_FAILED_TO_GET_STREAM_TYPE</span><span class="p">,</span>
  <span class="n">RDNA_ERR_FAILED_TO_WRITE_INTO_STREAM</span><span class="p">,</span>
  <span class="n">RDNA_ERR_FAILED_TO_END_STREAM</span><span class="p">,</span>
  <span class="n">RDNA_ERR_FAILED_TO_DESTROY_STREAM</span><span class="p">,</span>

  <span class="n">RDNA_ERR_FAILED_TO_INITIALIZE</span> <span class="o">=</span> <span class="mi">101</span><span class="p">,</span>
  <span class="n">RDNA_ERR_FAILED_TO_PAUSERUNTIME</span><span class="p">,</span>
  <span class="n">RDNA_ERR_FAILED_TO_RESUMERUNTIME</span><span class="p">,</span>
  <span class="n">RDNA_ERR_FAILED_TO_TERMINATE</span><span class="p">,</span>
  <span class="n">RDNA_ERR_FAILED_TO_GET_CIPHERSALT</span><span class="p">,</span>
  <span class="n">RDNA_ERR_FAILED_TO_GET_CIPHERSPECS</span><span class="p">,</span>
  <span class="n">RDNA_ERR_FAILED_TO_GET_AGENT_ID</span><span class="p">,</span>
  <span class="n">RDNA_ERR_FAILED_TO_GET_SESSION_ID</span><span class="p">,</span>
  <span class="n">RDNA_ERR_FAILED_TO_GET_DEVICE_ID</span><span class="p">,</span>
  <span class="n">RDNA_ERR_FAILED_TO_GET_SERVICE</span><span class="p">,</span>
  <span class="n">RDNA_ERR_FAILED_TO_START_SERVICE</span><span class="p">,</span>
  <span class="n">RDNA_ERR_FAILED_TO_STOP_SERVICE</span><span class="p">,</span>
  <span class="n">RDNA_ERR_FAILED_TO_ENCRYPT_DATA_PACKET</span><span class="p">,</span>
  <span class="n">RDNA_ERR_FAILED_TO_DECRYPT_DATA_PACKET</span><span class="p">,</span>
  <span class="n">RDNA_ERR_FAILED_TO_ENCRYPT_HTTP_REQUEST</span><span class="p">,</span>
  <span class="n">RDNA_ERR_FAILED_TO_DECRYPT_HTTP_RESPONSE</span><span class="p">,</span>
  <span class="n">RDNA_ERR_FAILED_TO_CREATE_PRIVACY_STREAM</span><span class="p">,</span>
<span class="p">}</span> <span class="n">RDNAErrorID</span><span class="p">;</span>
</code></pre>

<table><thead>
<tr>
<th>Error ID</th>
<th>Value</th>
<th>Meaning</th>
</tr>
</thead><tbody>
<tr>
<td>ERR_NONE</td>
<td>0</td>
<td>The operation is successful and no error has occured</td>
</tr>
<tr>
<td>ERR_NOT_INITIALIZED</td>
<td>1</td>
<td>The API Runtime is not initialized</td>
</tr>
<tr>
<td>ERR_GENERIC_ERROR</td>
<td>2</td>
<td>Generic error has occured</td>
</tr>
<tr>
<td>ERR_INVALID_VERSION</td>
<td>3</td>
<td>The SDK Version is invalid or unsupported</td>
</tr>
<tr>
<td>ERR_INVALID_ARGS</td>
<td>4</td>
<td>The argument(s) passed to the API is invalid</td>
</tr>
<tr>
<td>ERR_INVALID_CONTEXT</td>
<td>5</td>
<td>The context passed to the API is invalid</td>
</tr>
<tr>
<td>ERR_FAILED_TO_CONNECT_VIA_PROXY</td>
<td>21</td>
<td>Failed to connect to REL-ID Gateway Server via proxy.</td>
</tr>
<tr>
<td>ERR_NULL_CALLBACKS</td>
<td>22</td>
<td>The callback/ptr passed in is null</td>
</tr>
<tr>
<td>ERR_INVALID_HOST</td>
<td>23</td>
<td>The hostname/IP is null or empty</td>
</tr>
<tr>
<td>ERR_INVALID_PORTNUM</td>
<td>24</td>
<td>The port number is invalid</td>
</tr>
<tr>
<td>ERR_INVALID_AGENT_INFO</td>
<td>25</td>
<td>The agent info is invalid (check the agent info blob received by Admin)</td>
</tr>
<tr>
<td>ERR_FAILED_TO_CONNECT_TO_SERVER</td>
<td>26</td>
<td>Failed to connect to REL-ID Gateway Server</td>
</tr>
<tr>
<td>ERR_FAILED_TO_AUTHENTICATE</td>
<td>27</td>
<td>Failed to authenticate with REL-ID Gateway Server</td>
</tr>
<tr>
<td>ERR_INVALID_SAVED_CONTEXT</td>
<td>28</td>
<td>The saved context passed to Resume is invalid</td>
</tr>
<tr>
<td>ERR_INVALID_HTTP_REQUEST</td>
<td>29</td>
<td>The Http Request passed to Encrypt Http API is invalid</td>
</tr>
<tr>
<td>ERR_INVALID_HTTP_RESPONSE</td>
<td>30</td>
<td>The Http Request passed to Decrypt Http API is invalid</td>
</tr>
<tr>
<td>ERR_INVALID_CIPHERSPECS</td>
<td>42</td>
<td>The cipher spec passed in is invalid</td>
</tr>
<tr>
<td>ERR_PLAINTEXT_EMPTY</td>
<td>43</td>
<td>The plain text passed to Encrypt API is empty</td>
</tr>
<tr>
<td>ERR_PLAINTEXT_LENGTH_INVALID</td>
<td>44</td>
<td>The plain text length passed to Encrypt API is invalid</td>
</tr>
<tr>
<td>ERR_CIPHERTEXT_EMPTY</td>
<td>45</td>
<td>The cipher text passed to Decrypt API is empty</td>
</tr>
<tr>
<td>ERR_CIPHERTEXT_LENGTH_INVALID</td>
<td>46</td>
<td>The cipher text length passed to Decrypt API is invalid</td>
</tr>
<tr>
<td>ERR_SERVICE_NOT_SUPPORTED</td>
<td>61</td>
<td>The service provided is not supported</td>
</tr>
<tr>
<td>ERR_INVALID_SERVICE_NAME</td>
<td>62</td>
<td>The service name passed in is invalid</td>
</tr>
<tr>
<td>ERR_FAILED_TO_GET_STREAM_PRIVACYSCOPE</td>
<td>81</td>
<td>Failed to get stream privacy scope</td>
</tr>
<tr>
<td>ERR_FAILED_TO_GET_STREAM_TYPE</td>
<td>82</td>
<td>Failed to get stream type</td>
</tr>
<tr>
<td>ERR_FAILED_TO_WRITE_INTO_STREAM</td>
<td>83</td>
<td>Failed to write into privacy stream</td>
</tr>
<tr>
<td>ERR_FAILED_TO_END_STREAM</td>
<td>84</td>
<td>Failed to end privacy stream</td>
</tr>
<tr>
<td>ERR_FAILED_TO_DESTROY_STREAM</td>
<td>85</td>
<td>Failed to destroy privacy stream</td>
</tr>
<tr>
<td>ERR_FAILED_TO_INITIALIZE</td>
<td>101</td>
<td>Failed to initialize</td>
</tr>
<tr>
<td>ERR_FAILED_TO_PAUSERUNTIME</td>
<td>102</td>
<td>Failed to pause runtime</td>
</tr>
<tr>
<td>ERR_FAILED_TO_RESUMERUNTIME</td>
<td>103</td>
<td>Failed to resume runtime</td>
</tr>
<tr>
<td>ERR_FAILED_TO_TERMINATE</td>
<td>104</td>
<td>Failed to terminate</td>
</tr>
<tr>
<td>ERR_FAILED_TO_GET_CIPHERSALT</td>
<td>105</td>
<td>Failed to get cipher salt</td>
</tr>
<tr>
<td>ERR_FAILED_TO_GET_CIPHERSPECS</td>
<td>106</td>
<td>Failed to get cipherspecs</td>
</tr>
<tr>
<td>ERR_FAILED_TO_GET_AGENT_ID</td>
<td>107</td>
<td>Failed to get agent id</td>
</tr>
<tr>
<td>ERR_FAILED_TO_GET_SESSION_ID</td>
<td>108</td>
<td>Failed to get session id</td>
</tr>
<tr>
<td>ERR_FAILED_TO_GET_DEVICE_ID</td>
<td>109</td>
<td>Failed to get device id</td>
</tr>
<tr>
<td>ERR_FAILED_TO_GET_SERVICE</td>
<td>110</td>
<td>Failed to get service</td>
</tr>
<tr>
<td>ERR_FAILED_TO_START_SERVICE</td>
<td>111</td>
<td>Failed to start service</td>
</tr>
<tr>
<td>ERR_FAILED_TO_STOP_SERVICE</td>
<td>112</td>
<td>Failed to stop service</td>
</tr>
<tr>
<td>ERR_FAILED_TO_ENCRYPT_DATA_PACKET</td>
<td>113</td>
<td>Failed to encrypt data packet</td>
</tr>
<tr>
<td>ERR_FAILED_TO_DECRYPT_DATA_PACKET</td>
<td>114</td>
<td>Failed to decrypt data packet</td>
</tr>
<tr>
<td>ERR_FAILED_TO_ENCRYPT_HTTP_REQUEST</td>
<td>115</td>
<td>Failed to encrypt HTTP request</td>
</tr>
<tr>
<td>ERR_FAILED_TO_DECRYPT_HTTP_RESPONSE</td>
<td>116</td>
<td>Failed to decrypt HTTP response</td>
</tr>
<tr>
<td>ERR_FAILED_TO_CREATE_PRIVACY_STREAM</td>
<td>117</td>
<td>Failed to create privacy stream</td>
</tr>
</tbody></table>

<h2 id="method-identifiers-enum">Method identifiers (enum)</h2>

<p>These identifiers are used to identify the routine when the <code class="prettyprint">StatusUpdate</code> callback routine is invoked.</p>
<pre class="highlight c"><code><span class="k">typedef</span> <span class="k">enum</span> <span class="p">{</span>
  <span class="n">CORE_METH_NONE</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
  <span class="n">CORE_METH_INITIALIZE</span><span class="p">,</span>
  <span class="n">CORE_METH_TERMINATE</span><span class="p">,</span>
  <span class="n">CORE_METH_RESUME</span><span class="p">,</span>
  <span class="n">CORE_METH_PAUSE</span><span class="p">,</span>
<span class="p">}</span> <span class="n">e_core_method_t</span><span class="p">;</span>
</code></pre>
<pre class="highlight java"><code><span class="kd">public</span> <span class="kd">abstract</span> <span class="kd">class</span> <span class="nc">RDNA</span> <span class="o">{</span>
  <span class="c1">//..</span>
  <span class="kd">public</span> <span class="kd">enum</span> <span class="n">RDNAMethodID</span> <span class="o">{</span>
    <span class="n">RDNA_METH_NONE</span><span class="o">(</span><span class="mi">0</span><span class="o">),</span>
    <span class="n">RDNA_METH_INITIALIZE</span><span class="o">(</span><span class="mi">1</span><span class="o">),</span>
    <span class="n">RDNA_METH_TERMINATE</span><span class="o">(</span><span class="mi">2</span><span class="o">),</span>
    <span class="n">RDNA_METH_RESUME</span><span class="o">(</span><span class="mi">3</span><span class="o">),</span>
    <span class="n">RDNA_METH_PAUSE</span><span class="o">(</span><span class="mi">4</span><span class="o">);</span>
  <span class="o">}</span>
  <span class="c1">//..</span>
<span class="o">}</span>
</code></pre>
<pre class="highlight objective_c"><code><span class="k">typedef</span> <span class="nf">NS_ENUM</span><span class="p">(</span><span class="n">NSInteger</span><span class="p">,</span> <span class="n">RDNAMethodID</span><span class="p">)</span> <span class="p">{</span>
  <span class="n">RDNA_METH_NONE</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
  <span class="n">RDNA_METH_INITIALIZE</span><span class="p">,</span>
  <span class="n">RDNA_METH_TERMINATE</span><span class="p">,</span>
  <span class="n">RDNA_METH_RESUME</span><span class="p">,</span>
  <span class="n">RDNA_METH_PAUSE</span><span class="p">,</span>
<span class="p">};</span>
</code></pre>
<pre class="highlight cpp"><code><span class="k">typedef</span> <span class="k">enum</span> <span class="p">{</span>
  <span class="n">RDNA_METH_NONE</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
  <span class="n">RDNA_METH_INITIALIZE</span><span class="p">,</span>
  <span class="n">RDNA_METH_TERMINATE</span><span class="p">,</span>
  <span class="n">RDNA_METH_RESUME</span><span class="p">,</span>
  <span class="n">RDNA_METH_PAUSE</span><span class="p">,</span>
<span class="p">}</span> <span class="n">RDNAMethodID</span><span class="p">;</span>
</code></pre>

<table><thead>
<tr>
<th>Method ID</th>
<th>Meaning</th>
</tr>
</thead><tbody>
<tr>
<td>CORE_METH_NONE</td>
<td>Not a specific method ID, can be used for generic status update</td>
</tr>
<tr>
<td>CORE_METH_INITIALIZE</td>
<td>Initialize runtime method</td>
</tr>
<tr>
<td>CORE_METH_TERMINATE</td>
<td>Terminate runtime method</td>
</tr>
<tr>
<td>CORE_METH_RESUME</td>
<td>Resume runtime method</td>
</tr>
<tr>
<td>CORE_METH_PAUSE</td>
<td>Pause runtime method</td>
</tr>
</tbody></table>

<h2 id="service-access-introduction">Service access - Introduction</h2>

<p>These structures are used with the backend service access routines. They serve to encapsulate the backend services that are accessed by the API-client application. At a high level, the following lines/bullets describe these structures -</p>

<ul>
<li>Each backend service is represented as a single structure with fields identifying the following information about it -

<ul>
<li>its unique logical name,</li>
<li>its target backend coordinate (hostname/IP-address and port number),</li>
<li>the access-gateway to connect via, and</li>
<li>its locally available access ports</li>
</ul></li>
<li>An opaque &#39;service context&rsquo; pointer is also part of this structure, which needs to be supplied in order to stop the service access via API.</li>
<li>The access port structure in turn specifies further details such as -

<ul>
<li>whether the service is started or not,</li>
<li>whether the local port is bound to all device network interfaces or not,</li>
<li>whether it must be started automatically on initialization or not,</li>
<li>whether it requires local privacy (between API-client and the REL-ID DNA) or not, and finally,</li>
<li>whether it is accessible locally via a forwarded port or via the proxy facade on the DNA.</li>
</ul></li>
</ul>

<h2 id="service-access-port-type-enum">Service access - Port type (enum)</h2>

<p>These flags specify attributes of the returned access port for the backend service. The meanings of each flag are as follows -</p>
<pre class="highlight c"><code><span class="k">typedef</span> <span class="k">enum</span> <span class="p">{</span>
  <span class="n">CORE_PORT_TYPE_PROXY</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
  <span class="n">CORE_PORT_TYPE_PORTF</span><span class="p">,</span>
<span class="p">}</span> <span class="n">e_port_type_t</span><span class="p">;</span>
</code></pre>
<pre class="highlight java"><code><span class="kd">public</span> <span class="kd">abstract</span> <span class="kd">class</span> <span class="nc">RDNA</span> <span class="o">{</span>
  <span class="c1">//..</span>
  <span class="kd">public</span> <span class="kd">enum</span> <span class="n">RDNAPortType</span> <span class="o">{</span>
    <span class="n">RDNA_PORT_TYPE_PROXY</span><span class="o">(</span><span class="mi">0</span><span class="o">),</span>
    <span class="n">RDNA_PORT_TYPE_PORTF</span><span class="o">(</span><span class="mi">1</span><span class="o">);</span>
  <span class="o">}</span>
  <span class="c1">//..</span>
<span class="o">}</span>
</code></pre>
<pre class="highlight objective_c"><code><span class="k">typedef</span> <span class="nf">NS_ENUM</span> <span class="p">(</span><span class="n">NSInteger</span><span class="p">,</span> <span class="n">RDNAPortType</span><span class="p">)</span> <span class="p">{</span>
  <span class="n">RDNA_PORT_TYPE_PROXY</span> <span class="o">=</span> <span class="mh">0x00</span><span class="p">,</span>
  <span class="n">RDNA_PORT_TYPE_PORTF</span><span class="p">,</span>
<span class="p">};</span>
</code></pre>
<pre class="highlight cpp"><code><span class="k">typedef</span> <span class="k">enum</span> <span class="p">{</span>
  <span class="n">RDNA_PORT_TYPE_PROXY</span> <span class="o">=</span> <span class="mh">0x00</span><span class="p">,</span>
  <span class="n">RDNA_PORT_TYPE_PORTF</span><span class="p">,</span>
<span class="p">}</span> <span class="n">RDNAPortType</span><span class="p">;</span>
</code></pre>

<p>Either one of the below flags is set in the access port structure for a service.</p>

<table><thead>
<tr>
<th>Flag Name</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>PORT_TYPE_PROXY (0)</td>
<td>When set, it specifies that the access port is that of the locally running HTTP proxy facade of the REL-ID DNA, which will transparently tunnel requests and connections to the corresponding backend enterprise service coordinate. In this case, the API-client application would require to assume it is accessing the backend enterprise service via a proxy server on the specified port number.</td>
</tr>
<tr>
<td>PORT_TYPE_PORTF (1)</td>
<td>When set, it specifies that the access port is a locally available forwarded TCP port, representing transparent connectivity to the corresponding backend enterprise service coordinate. In this case, the API-client application would require to connect directly to this port, as if it is connecting to the backend enterprise service.</td>
</tr>
</tbody></table>

<h2 id="service-access-port-structure">Service access - Port (structure)</h2>

<p>Each access port structure consists of a bit-field corresponding to a bunch of boolean flags, and the actual TCP port number for the access port.</p>
<pre class="highlight c"><code><span class="k">typedef</span> <span class="k">struct</span>
<span class="p">{</span>
  <span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">isStarted</span>        <span class="o">:</span> <span class="mi">1</span><span class="p">;</span>
  <span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">isLocalhostOnly</span>  <span class="o">:</span> <span class="mi">1</span><span class="p">;</span>
  <span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">isAutoStarted</span>    <span class="o">:</span> <span class="mi">1</span><span class="p">;</span>
  <span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">isPrivacyEnabled</span> <span class="o">:</span> <span class="mi">1</span><span class="p">;</span>
  <span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">portType</span>         <span class="o">:</span> <span class="mi">1</span><span class="p">;</span>
  <span class="kt">int</span> <span class="n">port</span><span class="p">;</span>
<span class="p">}</span> <span class="n">core_port_t</span><span class="p">;</span>
</code></pre>
<pre class="highlight java"><code><span class="kd">public</span> <span class="kd">abstract</span> <span class="kd">class</span> <span class="nc">RDNA</span> <span class="o">{</span>
  <span class="c1">//..</span>
  <span class="kd">public</span> <span class="kd">static</span> <span class="kd">class</span> <span class="nc">RDNAPort</span> <span class="o">{</span>
    <span class="kd">public</span> <span class="kt">boolean</span> <span class="n">isStarted</span><span class="o">;</span>
    <span class="kd">public</span> <span class="kt">boolean</span> <span class="n">isLocalhostOnly</span><span class="o">;</span>
    <span class="kd">public</span> <span class="kt">boolean</span> <span class="n">isAutoStarted</span><span class="o">;</span>
    <span class="kd">public</span> <span class="kt">boolean</span> <span class="n">isPrivacyEnabled</span><span class="o">;</span>
    <span class="kd">public</span> <span class="n">RDNAPortType</span> <span class="n">portType</span><span class="o">;</span>
    <span class="kd">public</span> <span class="kt">int</span> <span class="n">port</span><span class="o">;</span>
  <span class="o">}</span>
  <span class="c1">//..</span>
<span class="o">}</span>
</code></pre>
<pre class="highlight objective_c"><code><span class="k">@interface</span> <span class="nc">RDNAPort</span> <span class="p">:</span> <span class="nc">NSObject</span>
  <span class="k">@property</span> <span class="p">(</span><span class="n">nonatomic</span><span class="p">)</span> <span class="n">BOOL</span> <span class="n">isStarted</span><span class="p">;</span>
  <span class="k">@property</span> <span class="p">(</span><span class="n">nonatomic</span><span class="p">)</span> <span class="n">BOOL</span> <span class="n">isLocalhostOnly</span><span class="p">;</span>
  <span class="k">@property</span> <span class="p">(</span><span class="n">nonatomic</span><span class="p">)</span> <span class="n">BOOL</span> <span class="n">isAutoStarted</span><span class="p">;</span>
  <span class="k">@property</span> <span class="p">(</span><span class="n">nonatomic</span><span class="p">)</span> <span class="n">BOOL</span> <span class="n">isPrivacyEnabled</span><span class="p">;</span>
  <span class="k">@property</span> <span class="p">(</span><span class="n">nonatomic</span><span class="p">)</span> <span class="n">RDNAPortType</span> <span class="n">portType</span><span class="p">;</span>
  <span class="k">@property</span> <span class="p">(</span><span class="n">nonatomic</span><span class="p">)</span> <span class="kt">uint16_t</span> <span class="n">port</span><span class="p">;</span>
<span class="k">@end</span>
</code></pre>
<pre class="highlight cpp"><code><span class="k">typedef</span> <span class="k">struct</span> <span class="n">RDNAPort_s</span> <span class="p">{</span>
  <span class="n">bool</span> <span class="n">isStarted</span><span class="p">;</span>
  <span class="n">bool</span> <span class="n">isLocalhostOnly</span><span class="p">;</span>
  <span class="n">bool</span> <span class="n">isAutoStarted</span><span class="p">;</span>
  <span class="n">bool</span> <span class="n">isPrivacyEnabled</span><span class="p">;</span>
  <span class="n">RDNAPortType</span> <span class="n">portType</span><span class="p">;</span>
  <span class="kt">unsigned</span> <span class="kt">short</span>  <span class="n">port</span><span class="p">;</span>
<span class="p">}</span> <span class="n">RDNAPort</span><span class="p">;</span>
</code></pre>

<table><thead>
<tr>
<th>Field Name</th>
<th>Data Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>isStarted</td>
<td>bit&nbsp;(boolean)</td>
<td>Specifies whether the service access is enabled. In case of a TYPE_PROXY port, this implies the requests and connections to the corresponding backend enterprise service is enabled. In case of a TYPE_PORTF port, this implies that the locally forwarded port is up and accepting connections on behalf of the backend enterprise service.</td>
</tr>
<tr>
<td>isLocalhostOnly</td>
<td>bit&nbsp;(boolean)</td>
<td>Specifies whether the port is bound just on the local loopback interfaces. If not, it is bound on all network interfaces on the device (this is not recommended for enterprise applications)</td>
</tr>
<tr>
<td>isAutoStarted</td>
<td>bit&nbsp;(boolean)</td>
<td>Specifies whether the service access was started as part of the API-runtime initialization.</td>
</tr>
<tr>
<td>isPrivacyEnabled</td>
<td>bit&nbsp;(boolean)</td>
<td>Specifies whether use of the REL-ID Privacy API routines is mandated, for the data in transit between the API-client application and the REL-ID DNA</td>
</tr>
<tr>
<td>portType</td>
<td>bit&nbsp;(boolean)</td>
<td>Specifies whether the port is of TYPE_PROXY (0) or TYPE_PORTF (1), refer <code class="prettyprint">e_port_type_t</code></td>
</tr>
<tr>
<td>port</td>
<td>integer</td>
<td>Specifies the actual TCP port number for this service access (could be Proxy or Forwarded Port)</td>
</tr>
</tbody></table>

<h2 id="service-access-service-structure">Service access - Service (structure)</h2>

<p>The service structure is unique for a given backend service, and specifies the unique logical name, target coordinates (hostname/IP and port number), access gateway details through which to access the service and access port details. It also specifies an opaque coordinate structure to be used when operating on the service using the ServiceAccess* API routines.</p>
<pre class="highlight c"><code><span class="k">typedef</span> <span class="k">struct</span>
<span class="p">{</span>
  <span class="kt">char</span><span class="o">*</span> <span class="n">serviceName</span><span class="p">;</span>       <span class="cm">/* logical service name         */</span>
  <span class="kt">char</span><span class="o">*</span> <span class="n">targetHNIP</span><span class="p">;</span>        <span class="cm">/* backend hostname/IP          */</span>
  <span class="kt">int</span>   <span class="n">targetPort</span><span class="p">;</span>        <span class="cm">/* backend port number          */</span>
  <span class="kt">char</span><span class="o">*</span> <span class="n">accessServerName</span><span class="p">;</span>  <span class="cm">/* access server name           */</span>
  <span class="kt">void</span><span class="o">*</span> <span class="n">serviceCtx</span><span class="p">;</span>        <span class="cm">/* Service context structure    */</span>
  <span class="n">core_port_t</span> <span class="n">portInfo</span><span class="p">;</span>    <span class="cm">/* port setting and info        */</span>
<span class="p">}</span> <span class="n">core_service_t</span><span class="p">;</span>
</code></pre>
<pre class="highlight java"><code><span class="kd">public</span> <span class="kd">abstract</span> <span class="kd">class</span> <span class="nc">RDNA</span> <span class="o">{</span>
  <span class="c1">//..</span>
  <span class="kd">public</span> <span class="kd">static</span> <span class="kd">class</span> <span class="nc">RDNAService</span> <span class="o">{</span>
    <span class="kd">public</span> <span class="n">String</span> <span class="n">serviceName</span><span class="o">;</span>
    <span class="kd">public</span> <span class="n">String</span> <span class="n">targetHNIP</span><span class="o">;</span>
    <span class="kd">public</span> <span class="kt">int</span> <span class="n">targetPort</span><span class="o">;</span>
    <span class="kd">public</span> <span class="n">RDNAPort</span> <span class="n">portInfo</span><span class="o">;</span>
  <span class="o">}</span>
  <span class="c1">//..</span>
<span class="o">}</span>
</code></pre>
<pre class="highlight objective_c"><code><span class="k">@interface</span> <span class="nc">RDNAService</span> <span class="p">:</span> <span class="nc">NSObject</span>
  <span class="k">@property</span> <span class="p">(</span><span class="n">nonatomic</span><span class="p">,</span> <span class="n">copy</span><span class="p">)</span> <span class="n">NSString</span> <span class="o">*</span><span class="n">serviceName</span><span class="p">;</span>
  <span class="k">@property</span> <span class="p">(</span><span class="n">nonatomic</span><span class="p">,</span> <span class="n">copy</span><span class="p">)</span> <span class="n">NSString</span> <span class="o">*</span><span class="n">targetHNIP</span><span class="p">;</span>
  <span class="k">@property</span> <span class="p">(</span><span class="n">nonatomic</span><span class="p">)</span> <span class="kt">uint16_t</span> <span class="n">targetPort</span><span class="p">;</span>
  <span class="k">@property</span> <span class="p">(</span><span class="n">nonatomic</span><span class="p">)</span> <span class="n">RDNAPort</span> <span class="o">*</span><span class="n">portInfo</span><span class="p">;</span>
<span class="k">@end</span>
</code></pre>
<pre class="highlight cpp"><code><span class="k">typedef</span> <span class="k">struct</span> <span class="n">RDNAService_s</span> <span class="p">{</span>
  <span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="n">serviceName</span><span class="p">;</span>
  <span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="n">targetHNIP</span><span class="p">;</span>
  <span class="kt">unsigned</span> <span class="kt">short</span> <span class="n">targetPort</span><span class="p">;</span>
  <span class="n">RDNAPort</span> <span class="n">portInfo</span><span class="p">;</span>
<span class="p">}</span> <span class="n">RDNAService</span><span class="p">;</span>
</code></pre>

<table><thead>
<tr>
<th>Field Name</th>
<th>Data Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>serviceName</td>
<td>null-terminated string</td>
<td>Unique logical name of the backend service (as configured in REL-ID Gateway Manager)</td>
</tr>
<tr>
<td>targetHNIP</td>
<td>null-terminated string</td>
<td>The notional hostname/IP-address of the TCP coordinate of the backend service</td>
</tr>
<tr>
<td>targetPort</td>
<td>integer</td>
<td>The notional port number of the TCP coordinate of the backend service</td>
</tr>
<tr>
<td>accessServerName</td>
<td>null-terminated string</td>
<td><b><u><i>Only in Core API</i></u></b><br>Unique logical name of the Access Gateway Server through which this service is accessible</td>
</tr>
<tr>
<td>serviceCtx</td>
<td>opaque-reference</td>
<td><b><u><i>Only in Core API</i></u></b><br>Opaque context reference to be used when starting/stoping the ServiceAccess via the API routines</td>
</tr>
<tr>
<td>portInfo</td>
<td>access port structure</td>
<td>The access port structure corresponding to the service provided</td>
</tr>
</tbody></table>

<h1 id="basic-api-initialize-terminate">Basic API - Initialize-Terminate</h1>

<h2 id="initialize-routine">Initialize Routine</h2>

<p>This is the first routine that must be called to bootstrap the REL-ID API runtime up. The arguments to this routine are described in the below table.</p>

<p>This routine starts up the API runtime (including a DNA - <i>Digital Network Adapter</i> - instance), and in the process registers the API-client supplied callback routines with the API runtime context. This is a non-blocking routine, and when it returns, it will have initiated the process of creation of a REL-ID session in PRIMARY state, using the supplied <i>agent information</i> - the progress of this operation is notified to the API-client application via the status update (core API), and event notification (wrapper API), callback routines supplied.</p>

<p>A reference to the context of the newly created API runtime is returned to the API-client.</p>
<pre class="highlight c"><code><span class="kt">int</span>
<span class="n">coreInitialize</span>
<span class="p">(</span><span class="kt">void</span><span class="o">**</span> <span class="n">ppvRuntimeCtx</span><span class="p">,</span>
 <span class="kt">char</span><span class="o">*</span>  <span class="n">sAgentInfo</span><span class="p">,</span>
 <span class="n">core_callbacks_t</span><span class="o">*</span>
        <span class="n">pCallbacks</span><span class="p">,</span>
 <span class="kt">char</span><span class="o">*</span>  <span class="n">sAuthGatewayHNIP</span><span class="p">,</span>
 <span class="kt">int</span>    <span class="n">nAuthGatewayPORT</span><span class="p">,</span>
 <span class="kt">char</span><span class="o">*</span>  <span class="n">sCipherSpecs</span><span class="p">,</span>
 <span class="kt">char</span><span class="o">*</span>  <span class="n">sCipherSalt</span><span class="p">,</span>
 <span class="n">proxy_settings_t</span><span class="o">*</span>
        <span class="n">pProxySettings</span><span class="p">,</span>
 <span class="kt">void</span><span class="o">*</span>  <span class="n">pvAppCtx</span><span class="p">);</span>
</code></pre>
<pre class="highlight java"><code><span class="kd">public</span> <span class="kd">abstract</span> <span class="kd">class</span> <span class="nc">RDNA</span> <span class="o">{</span>
  <span class="c1">//..</span>
  <span class="kd">public</span> <span class="kd">static</span>
    <span class="n">RDNAStatus</span><span class="o">&lt;</span><span class="n">RDNA</span><span class="o">&gt;</span>
    <span class="n">initialize</span><span class="o">(</span>
      <span class="n">String</span> <span class="n">agentInfo</span><span class="o">,</span>
      <span class="n">RDNACallbacks</span>
             <span class="n">callbacks</span><span class="o">,</span>
      <span class="n">String</span> <span class="n">authGatewayHNIP</span><span class="o">,</span>
      <span class="kt">int</span>    <span class="n">authGatewayPORT</span><span class="o">,</span>
      <span class="n">String</span> <span class="n">cipherSpecs</span><span class="o">,</span>
      <span class="n">String</span> <span class="n">cipherSalt</span><span class="o">,</span>
      <span class="n">RDNAProxySettings</span>
             <span class="n">proxySettings</span><span class="o">,</span>
      <span class="n">Object</span> <span class="n">appCtx</span><span class="o">);</span>
  <span class="c1">//..</span>
<span class="o">}</span>
</code></pre>
<pre class="highlight objective_c"><code><span class="k">@interface</span> <span class="nc">RDNA</span> <span class="p">:</span> <span class="nc">NSObject</span>
  <span class="k">+</span> <span class="p">(</span><span class="kt">int</span><span class="p">)</span><span class="nf">initialize</span><span class="p">:(</span><span class="n">RDNA</span> <span class="o">**</span><span class="p">)</span><span class="nv">ppRuntimeCtx</span>
          <span class="nf">AgentInfo</span><span class="p">:(</span><span class="n">NSString</span> <span class="o">*</span><span class="p">)</span><span class="nv">agentInfo</span>
          <span class="nf">Callbacks</span><span class="p">:(</span><span class="n">id</span><span class="o">&lt;</span><span class="n">RDNACallbacks</span><span class="o">&gt;</span><span class="p">)</span><span class="nv">callbacks</span>
        <span class="nf">GatewayHost</span><span class="p">:(</span><span class="n">NSString</span> <span class="o">*</span><span class="p">)</span><span class="nv">authGatewayHNIP</span>
        <span class="nf">GatewayPort</span><span class="p">:(</span><span class="kt">uint16_t</span><span class="p">)</span><span class="nv">authGatewayPORT</span>
         <span class="nf">CipherSpec</span><span class="p">:(</span><span class="n">NSString</span> <span class="o">*</span><span class="p">)</span><span class="nv">cipherSpec</span>
         <span class="nf">CipherSalt</span><span class="p">:(</span><span class="n">NSString</span> <span class="o">*</span><span class="p">)</span><span class="nv">cipherSalt</span>
      <span class="nf">ProxySettings</span><span class="p">:(</span><span class="n">RDNAProxySettings</span> <span class="o">*</span><span class="p">)</span><span class="nv">proxySettings</span>
         <span class="nf">AppContext</span><span class="p">:(</span><span class="n">id</span><span class="p">)</span><span class="nv">appCtx</span><span class="p">;</span>
<span class="k">@end</span>
</code></pre>
<pre class="highlight cpp"><code><span class="k">class</span> <span class="nc">RDNA</span>
<span class="p">{</span>
<span class="k">public</span><span class="o">:</span>
  <span class="k">static</span> <span class="kt">int</span>
  <span class="n">initialize</span>
  <span class="p">(</span><span class="n">RDNA</span><span class="o">**</span>         <span class="n">ppRuntimeCtx</span><span class="p">,</span>
   <span class="n">std</span><span class="o">::</span><span class="n">string</span>    <span class="n">agentInfo</span><span class="p">,</span>
   <span class="n">RDNACallbacks</span><span class="o">*</span> <span class="n">callbacks</span><span class="p">,</span>
   <span class="n">std</span><span class="o">::</span><span class="n">string</span>    <span class="n">authGatewayHNIP</span><span class="p">,</span>
   <span class="kt">unsigned</span> <span class="kt">short</span> <span class="n">authGatewayPORT</span><span class="p">,</span>
   <span class="n">std</span><span class="o">::</span><span class="n">string</span>    <span class="n">cipherSpec</span><span class="p">,</span>
   <span class="n">std</span><span class="o">::</span><span class="n">string</span>    <span class="n">cipherSalt</span><span class="p">,</span>
   <span class="n">RDNAProxySettings</span><span class="o">*</span>
                  <span class="n">pProxySettings</span><span class="p">,</span>
   <span class="kt">void</span><span class="o">*</span>          <span class="n">appCtx</span><span class="p">);</span>
<span class="p">}</span>
</code></pre>

<table><thead>
<tr>
<th>Argument&nbsp;[in/out]</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>API&nbsp;Context&nbsp;[out]</td>
<td>The newly created API runtime context.<br>In Java, an instance of <code class="prettyprint">RDNA</code> is returned in an <code class="prettyprint">RDNAStatus&lt;RDNA&gt;</code> object.<br>In Core, Objective-C and C++, an out parameter is populated.</td>
</tr>
<tr>
<td>Agent&nbsp;Info&nbsp;[in]</td>
<td>Software identity information for the API-runtime to authenticate and establish primary session connectivity with the REL-ID platform backend</td>
</tr>
<tr>
<td>Callbacks&nbsp;[in]</td>
<td>Callback routines supplied by the API-client application. These are invoked by the API-runtime.</td>
</tr>
<tr>
<td>Auth&nbsp;Gateway&nbsp;HNIP&nbsp;[in]</td>
<td><b>H</b>ost<b>N</b>ame/<b>IP</b>-address of the REL-ID Authentication Gateway against which the API-runtime must establish mutual authenticated connectivity (on behalf of the API-client application)</td>
</tr>
<tr>
<td>Auth&nbsp;Gateway&nbsp;PORT&nbsp;[in]</td>
<td><b>PORT</b>-number at <code class="prettyprint">AuthGatewayHNIP</code>, on which the REL-ID Authentication Gateway is accessible (accepting connections)</td>
</tr>
<tr>
<td>Cipher&nbsp;Specs&nbsp;[in]</td>
<td>The cipher specifications (encryption algorithm, padding scheme and cipher-mode) to be used as a default for this API-Runtime context. If passed as empty, then the default Cipher Spec of the API-SDK will be used as default.</td>
</tr>
<tr>
<td>Cipher&nbsp;Salt&nbsp;[in]</td>
<td>The salt/IV to be used as default salt/IV for this API-Runtime context. If passed as empty, then the default Cipher Salt of the API-SDK will be used as default.</td>
</tr>
<tr>
<td>Application&nbsp;Context&nbsp;[in]</td>
<td>Opaque reference to API-client application context that is never interpreted/modified by the API-runtime. This reference is supplied with each callback invocation to the API-client.</td>
</tr>
<tr>
<td>Proxy&nbsp;Settings&nbsp;[in]</td>
<td>Hostname/IPaddress and port-number for proxy to use when connecting to the Auth Gateway server. This is an optional parameter that may be null if it is not applicable</td>
</tr>
</tbody></table>

<h2 id="terminate-routine">Terminate Routine</h2>
<pre class="highlight c"><code><span class="kt">int</span>
<span class="n">coreTerminate</span>
<span class="p">(</span><span class="kt">void</span><span class="o">*</span>  <span class="n">pvRuntimeCtx</span><span class="p">);</span>
</code></pre>
<pre class="highlight java"><code><span class="kd">public</span> <span class="kd">abstract</span> <span class="kd">class</span> <span class="nc">RDNA</span> <span class="o">{</span>
  <span class="c1">//..</span>
  <span class="kd">public</span> <span class="kd">abstract</span> <span class="kt">int</span> <span class="n">terminate</span><span class="o">();</span>
  <span class="c1">//..</span>
<span class="o">}</span>
</code></pre>
<pre class="highlight objective_c"><code><span class="k">@interface</span> <span class="nc">RDNA</span> <span class="p">:</span> <span class="nc">NSObject</span>
  <span class="c1">//..
</span>  <span class="k">-</span> <span class="p">(</span><span class="kt">int</span><span class="p">)</span><span class="n">terminate</span><span class="p">;</span>
  <span class="c1">//..
</span><span class="k">@end</span>
</code></pre>
<pre class="highlight cpp"><code><span class="k">class</span> <span class="nc">RDNA</span>
<span class="p">{</span>
<span class="k">public</span><span class="o">:</span>
  <span class="c1">//..
</span>  <span class="kt">int</span> <span class="n">terminate</span><span class="p">();</span>
  <span class="c1">//..
</span><span class="p">}</span>
</code></pre>

<table><thead>
<tr>
<th>Routine</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><b>Terminate</b></td>
<td>API runtime shutdown is initiated - including freeing up memory and other resources, and stopping of the DNA.</td>
</tr>
</tbody></table>

<h1 id="basic-api-sessions">Basic API - Sessions</h1>

<p>The REL-ID Session is issued to the client-side as an opaque ticket from the REL-ID backend. This ticket is subsequently used by the client-side API-runtime to gain access to backend enterprise services. </p>

<p>There are 2 types of REL-ID sessions - PRIMARY and SECONDARY:</p>

<ul>
<li><b>PRIMARY</b> (app) session - The Basic API Initialize routine creates a session associated with (i) the application identity (AgentInfo), and (ii) the device identity (or fingerprint). This session is called a <b>PRIMARY</b> session.</li>
<li><b>SECONDARY</b> (user) session - Upon successful end-user authentication, a new session ticket is issued to the client, which additionally associates a 3rd identity - (iii) the identity of the user. This session is called a <b>SECONDARY</b> session.</li>
</ul>

<aside class="notice"><u><b>SECONDARY (user) sessions</b> are part of the <b>Advanced API</b></u>.<br>Explained here just to put the types of sessions in perspective.</aside>

<aside class="notice"><b><u>Sessions are persistent</u></b><br>
The <b>PauseRuntime</b> routine returns the <i>in-session</i> state of the API-runtime includes the session tickets and their access configurations as well. This returned state may be persisted and reloaded into the API-runtime with the call to <b>ResumeRuntime</b>, to recreate the runtime state along with the session information required for accessing backend services.
</aside>

<p>When an API-client application no longer requires a session, for example when the end-user logs of the enterprise application, it can invoke the <code class="prettyprint">InvalidateAppSession</code> and/or <code class="prettyprint">InvalidateUserSession</code> routines to notify the REL-ID backend that the session is no longer valid and is not to be entertained anymore.</p>

<p>After the formation of user session - the app session is subsided by saving its state, the services related to app session is shutdown and the services related to user session is started. Hence after the invalidation of user session, the app session is again restored and the services related to app session is started as per its last subsided state.</p>

<h2 id="invalidateappsession-routine">InvalidateAppSession routine</h2>
<pre class="highlight c"><code><span class="kt">int</span>
<span class="n">coreInvalidateAppSession</span>
<span class="p">(</span><span class="kt">void</span><span class="o">*</span> <span class="n">pvRuntimeCtx</span><span class="p">);</span>
</code></pre>
<pre class="highlight java"><code><span class="kd">public</span> <span class="kd">abstract</span> <span class="kd">class</span> <span class="nc">RDNA</span> <span class="o">{</span>
  <span class="c1">//..</span>
  <span class="kd">public</span> <span class="kd">abstract</span> <span class="kt">int</span>
    <span class="n">invalidateAppSession</span><span class="o">();</span>
  <span class="c1">//..</span>
<span class="o">}</span>
</code></pre>
<pre class="highlight objective_c"><code><span class="k">@interface</span> <span class="nc">RDNA</span> <span class="p">:</span> <span class="nc">NSObject</span>
  <span class="c1">//..
</span>  <span class="k">-</span> <span class="p">(</span><span class="kt">int</span><span class="p">)</span><span class="n">invalidateAppSession</span><span class="p">;</span>
  <span class="c1">//..
</span><span class="k">@end</span>
</code></pre>
<pre class="highlight cpp"><code><span class="k">class</span> <span class="nc">RDNA</span>
<span class="p">{</span>
<span class="k">public</span><span class="o">:</span>
  <span class="c1">//..
</span>  <span class="kt">int</span> <span class="n">invalidateAppSession</span><span class="p">();</span>
  <span class="c1">//..
</span><span class="p">}</span>
</code></pre>

<p>This routine notifies the REL-ID backend that the application (PRIMARY) session present in the API-runtime context is to be invalidated. Accordingly the API-runtime, <i>forgets</i> the corresponding session ticket.</p>

<aside class="notice"><b><u>Note</u></b> that at this point, since there is no application session present in the API-runtime, the only possible API interaction for the API-client, is to invoke <b>Terminate</b>. If subsequent REL-ID based access is required, successful <b>Initialize</b> invocation would be required to create new <b>PRIMARY</b> application session.
</aside>

<h2 id="invalidateusersession-routine">InvalidateUserSession routine</h2>
<pre class="highlight c"><code><span class="kt">int</span>
<span class="n">coreInvalidateUserSession</span>
<span class="p">(</span><span class="kt">void</span><span class="o">*</span> <span class="n">pvRuntimeCtx</span><span class="p">);</span>
</code></pre>
<pre class="highlight java"><code><span class="kd">public</span> <span class="kd">abstract</span> <span class="kd">class</span> <span class="nc">RDNA</span> <span class="o">{</span>
  <span class="c1">//..</span>
  <span class="kd">public</span> <span class="kd">abstract</span> <span class="kt">int</span>
    <span class="n">invalidateUserSession</span><span class="o">();</span>
  <span class="c1">//..</span>
<span class="o">}</span>
</code></pre>
<pre class="highlight objective_c"><code><span class="k">@interface</span> <span class="nc">RDNA</span> <span class="p">:</span> <span class="nc">NSObject</span>
  <span class="c1">//..
</span>  <span class="k">-</span> <span class="p">(</span><span class="kt">int</span><span class="p">)</span><span class="n">invalidateUserSession</span><span class="p">;</span>
  <span class="c1">//..
</span><span class="k">@end</span>
</code></pre>
<pre class="highlight cpp"><code><span class="k">class</span> <span class="nc">RDNA</span>
<span class="p">{</span>
<span class="k">public</span><span class="o">:</span>
  <span class="c1">//..
</span>  <span class="kt">int</span> <span class="n">invalidateUserSession</span><span class="p">();</span>
  <span class="c1">//..
</span><span class="p">}</span>
</code></pre>

<p>This routine notifies the REL-ID backend that the user (SECONDARY) session present in the API-runtime context is to be invalidated. Accordingly the API-runtime, <i>forgets</i> the corresponding session ticket.</p>

<aside class="notice"><b><u>Note</u></b> that at this point, since there is no user (SECONDARY) session present in the API-runtime, the API-client may only access backend services that are accessible by virtue of the application (PRIMARY) session present in the API-runtime context.
</aside>

<h1 id="basic-api-service-access">Basic API - Service Access</h1>

<p>These routines enable the API-client applications to retrieve the service structure for the backend enterprise service it requires to interact with, and use that information to safely interact with them.
 * The first 2 <code class="prettyprint">GetService...</code> routines help retrieve the service information for the service - one of them looks it up using a logical unique name of the backend service and the other retrieves all available services for the current context
 * The second 2 <code class="prettyprint">ServiceAccess...</code> routines are used to start/enable and stop/disable the access to the backend services.</p>

<h2 id="information-retrieval">Information Retrieval</h2>
<pre class="highlight c"><code><span class="kt">int</span>
<span class="n">coreGetServiceByServiceName</span>
<span class="p">(</span><span class="kt">void</span><span class="o">*</span>  <span class="n">pvRuntimeCtx</span><span class="p">,</span>
 <span class="kt">char</span><span class="o">*</span>  <span class="n">sServiceName</span><span class="p">,</span>
 <span class="n">core_service_t</span><span class="o">**</span>
        <span class="n">ppService</span><span class="p">);</span>

<span class="kt">int</span>
<span class="n">coreGetServiceByTargetCoordinate</span>
<span class="p">(</span><span class="kt">void</span><span class="o">*</span>  <span class="n">pvRuntimeCtx</span><span class="p">,</span>
 <span class="kt">char</span><span class="o">*</span>  <span class="n">sTargetHNIP</span><span class="p">,</span>
 <span class="kt">int</span>    <span class="n">nTargetPORT</span><span class="p">,</span>
 <span class="n">core_service_t</span><span class="o">***</span>
        <span class="n">ppServices</span><span class="p">);</span>

<span class="kt">int</span>
<span class="n">coreGetAllServices</span>
<span class="p">(</span><span class="kt">void</span><span class="o">*</span>  <span class="n">pvRuntimeCtx</span><span class="p">,</span>
 <span class="n">core_service_t</span><span class="o">***</span>
        <span class="n">ppServices</span><span class="p">);</span>
</code></pre>
<pre class="highlight java"><code><span class="kd">public</span> <span class="kd">abstract</span> <span class="kd">class</span> <span class="nc">RDNA</span> <span class="o">{</span>
  <span class="c1">//..</span>
  <span class="kd">public</span> <span class="kd">abstract</span>
    <span class="n">RDNAStatus</span><span class="o">&lt;</span><span class="n">RDNAService</span><span class="o">&gt;</span>
    <span class="n">getServiceByServiceName</span>
    <span class="o">(</span><span class="n">String</span> <span class="n">serviceName</span><span class="o">);</span>

  <span class="kd">public</span> <span class="kd">abstract</span>
    <span class="n">RDNAStatus</span><span class="o">&lt;</span><span class="n">RDNAService</span><span class="o">[]&gt;</span>
    <span class="n">getServiceByTargetCoordinate</span>
    <span class="o">(</span><span class="n">String</span> <span class="n">targetHNIP</span><span class="o">,</span> <span class="kt">int</span> <span class="n">targetPORT</span><span class="o">);</span>

  <span class="kd">public</span> <span class="kd">abstract</span>
    <span class="n">RDNAStatus</span><span class="o">&lt;</span><span class="n">RDNAService</span><span class="o">[]&gt;</span>
    <span class="n">getAllServices</span><span class="o">();</span>
  <span class="c1">//..</span>
<span class="o">}</span>
</code></pre>
<pre class="highlight objective_c"><code><span class="k">@interface</span> <span class="nc">RDNA</span> <span class="p">:</span> <span class="nc">NSObject</span>
  <span class="k">-</span> <span class="p">(</span><span class="kt">int</span><span class="p">)</span><span class="nf">getServiceByServiceName</span><span class="p">:(</span><span class="n">NSString</span> <span class="o">*</span><span class="p">)</span><span class="nv">serviceName</span><span class="p">;</span>
                     <span class="n">ServiceInfo</span><span class="o">:</span><span class="p">(</span><span class="n">RDNAService</span> <span class="o">**</span><span class="p">)</span><span class="n">service</span>

  <span class="o">-</span> <span class="p">(</span><span class="kt">int</span><span class="p">)</span><span class="n">getServiceByTargetCoordinate</span><span class="o">:</span><span class="p">(</span><span class="n">NSString</span> <span class="o">*</span><span class="p">)</span><span class="n">targetHNIP</span>
                           <span class="n">TargetPort</span><span class="o">:</span><span class="p">(</span><span class="kt">int</span><span class="p">)</span><span class="n">targetPORT</span>
                         <span class="n">ServicesInfo</span><span class="o">:</span><span class="p">(</span><span class="n">NSArray</span> <span class="o">**</span><span class="p">)</span><span class="n">services</span>

  <span class="o">-</span> <span class="p">(</span><span class="kt">int</span><span class="p">)</span><span class="n">getAllServices</span><span class="o">:</span><span class="p">(</span><span class="n">NSArray</span> <span class="o">**</span><span class="p">)</span><span class="n">services</span><span class="p">;</span>
<span class="k">@end</span>
</code></pre>
<pre class="highlight cpp"><code><span class="k">class</span> <span class="nc">RDNA</span>
<span class="p">{</span>
<span class="k">public</span><span class="o">:</span>
  <span class="kt">int</span>
  <span class="n">getServiceByServiceName</span>
  <span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">string</span>  <span class="n">serviceName</span><span class="p">,</span>
   <span class="n">RDNAService</span><span class="o">&amp;</span> <span class="n">service</span><span class="p">);</span>

  <span class="kt">int</span>
  <span class="n">getServiceByTargetCoordinate</span>
  <span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">string</span>   <span class="n">targetHNIP</span><span class="p">,</span>
   <span class="kt">unsigned</span> <span class="n">port</span> <span class="n">targetPORT</span><span class="p">,</span>
   <span class="n">vector</span><span class="o">&lt;</span><span class="n">RDNAService</span><span class="o">&gt;&amp;</span>
                 <span class="n">services</span><span class="p">);</span>

  <span class="kt">int</span>
  <span class="n">getAllServices</span>
  <span class="p">(</span><span class="n">vector</span><span class="o">&lt;</span><span class="n">RDNAService</span><span class="o">&gt;&amp;</span>
                <span class="n">services</span><span class="p">);</span>
<span class="p">}</span>
</code></pre>

<table><thead>
<tr>
<th>Routine&nbsp;Name</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><b>GetServiceByServiceName</b></td>
<td>Retrieve the <code class="prettyprint">Service</code> structure by looking up the unique logical name of the backend service (as configured in the REL-ID Gateway Manager)</td>
</tr>
<tr>
<td><b>GetServiceByTargetCoordinate</b></td>
<td>Retrieve one or more <code class="prettyprint">Service</code> structure(s) by looking up the target (masked) coordinate, corresponding to the backend enterprise service. More than one services could be returned, depending on the access configuration for the context.</td>
</tr>
<tr>
<td><b>GetAllServices</b></td>
<td>Retrieve the <code class="prettyprint">Service</code> structures for all available services that are accessible via the current API-runtime context and the session within.</td>
</tr>
</tbody></table>

<h2 id="start-stop-access">Start/Stop Access</h2>
<pre class="highlight c"><code><span class="kt">int</span>
<span class="n">coreServiceAccessStart</span>
<span class="p">(</span><span class="kt">void</span><span class="o">*</span>  <span class="n">pvRuntimeCtx</span><span class="p">,</span>
 <span class="n">core_service_t</span><span class="o">*</span>
        <span class="n">pService</span><span class="p">);</span>

<span class="kt">int</span>
<span class="n">coreServiceAccessStop</span>
<span class="p">(</span><span class="kt">void</span><span class="o">*</span>  <span class="n">pvRuntimeCtx</span><span class="p">,</span>
 <span class="n">core_service_t</span><span class="o">*</span>
        <span class="n">pService</span><span class="p">);</span>

<span class="kt">int</span>
<span class="n">coreServiceAccessStartAll</span>
<span class="p">(</span><span class="kt">void</span><span class="o">*</span>  <span class="n">pvRuntimeCtx</span><span class="p">);</span>

<span class="kt">int</span>
<span class="n">coreServiceAccessStopAll</span>
<span class="p">(</span><span class="kt">void</span><span class="o">*</span>  <span class="n">pvRuntimeCtx</span><span class="p">);</span>
</code></pre>
<pre class="highlight java"><code><span class="kd">public</span> <span class="kd">abstract</span> <span class="kd">class</span> <span class="nc">RDNA</span> <span class="o">{</span>
  <span class="c1">//..</span>
  <span class="kd">public</span> <span class="kd">abstract</span> <span class="kt">int</span> <span class="n">serviceAccessStart</span> <span class="o">(</span><span class="n">RDNAService</span> <span class="n">service</span><span class="o">);</span>
  <span class="kd">public</span> <span class="kd">abstract</span> <span class="kt">int</span> <span class="n">serviceAccessStop</span>  <span class="o">(</span><span class="n">RDNAService</span> <span class="n">service</span><span class="o">);</span>
  <span class="kd">public</span> <span class="kd">abstract</span> <span class="kt">int</span> <span class="n">serviceAccessStartAll</span><span class="o">();</span>
  <span class="kd">public</span> <span class="kd">abstract</span> <span class="kt">int</span> <span class="n">serviceAccessStopAll</span><span class="o">();</span>
  <span class="c1">//..</span>
<span class="o">}</span>
</code></pre>
<pre class="highlight objective_c"><code><span class="k">@interface</span> <span class="nc">RDNA</span> <span class="p">:</span> <span class="nc">NSObject</span>
  <span class="k">-</span> <span class="p">(</span><span class="kt">int</span><span class="p">)</span><span class="nf">serviceAccessStart</span><span class="p">:(</span><span class="k">const</span> <span class="n">RDNAService</span> <span class="o">*</span><span class="p">)</span><span class="nv">service</span><span class="p">;</span>
  <span class="k">-</span> <span class="p">(</span><span class="kt">int</span><span class="p">)</span><span class="nf">serviceAccessStop</span><span class="p">:(</span><span class="k">const</span> <span class="n">RDNAService</span> <span class="o">*</span><span class="p">)</span><span class="nv">service</span><span class="p">;</span>
  <span class="k">-</span> <span class="p">(</span><span class="kt">int</span><span class="p">)</span><span class="n">serviceAccessStartAll</span><span class="p">;</span>
  <span class="k">-</span> <span class="p">(</span><span class="kt">int</span><span class="p">)</span><span class="n">serviceAccessStopAll</span><span class="p">;</span>
<span class="k">@end</span>
</code></pre>
<pre class="highlight cpp"><code><span class="k">class</span> <span class="nc">RDNA</span>
<span class="p">{</span>
<span class="k">public</span><span class="o">:</span>
  <span class="kt">int</span> <span class="n">serviceAccessStart</span><span class="p">(</span><span class="k">const</span> <span class="n">RDNAService</span> <span class="n">svc</span><span class="p">);</span>
  <span class="kt">int</span> <span class="n">serviceAccessStop</span><span class="p">(</span><span class="k">const</span> <span class="n">RDNAService</span> <span class="n">svc</span><span class="p">);</span>
  <span class="kt">int</span> <span class="n">serviceAccessStartAll</span><span class="p">();</span>
  <span class="kt">int</span> <span class="n">serviceAccessStopAll</span><span class="p">();</span>
<span class="p">}</span>
</code></pre>

<table><thead>
<tr>
<th>Routine&nbsp;Name</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><b>ServiceAccessStart</b></td>
<td>Access to the service (i.e. the corresponding backend enterprise service) via the access port for the <code class="prettyprint">Service</code> is started<li>In case of <code class="prettyprint">TYPE_PROXY</code> port, the proxy facade of the DNA in the API-runtime listening on that port will start <i>tunneling</i> requests/data to the corresponding backend service.<li>In case of <code class="prettyprint">TYPE_PORTF</code> port, the corresponding forwarded TCP port is started in the DNA in the API-runtime, and made ready to accept connections from which data will be transparently forwarded to the corresponding backend service.</td>
</tr>
<tr>
<td><b>ServiceAccessStop</b></td>
<td>Access to the service (i.e. the corresponding backend enterprise service) via the access port for the <code class="prettyprint">Service</code> is stopped<li>In case of <code class="prettyprint">TYPE_PROXY</code> port, the proxy facade of the DNA in the API-runtime listening on that port will stop <i>tunneling</i> requests/data to the corresponding backend service and it will revert with an appropriate HTTP Proxy error code for further access to this service<li>In case of <code class="prettyprint">TYPE_PORTF</code> port, the corresponding forwarded TCP port is shutdown and closed in the DNA in the API-runtime, and connections to that port will no longer be accepted.</td>
</tr>
</tbody></table>

<h1 id="basic-api-data-privacy">Basic API - Data Privacy</h1>

<p>The data privacy provided to the API-client application, is delivered at different scopes - each scope sets how the privacy (encryption) keys are generated and used. Further, 3 types of encryption/decryption functionality is provided - across all supported privacy scopes -
 # Raw Data Packets: Encryption and decryption of raw data packets
 # HTTP Requests and Responses: Encryption of HTTP requests and decryption of HTTP responses
 # Privacy Streams: An in-memory buffered stream abstraction for encryption and decryption</p>

<h2 id="scopes-levels">Scopes/Levels</h2>
<pre class="highlight c"><code><span class="k">typedef</span> <span class="k">enum</span> <span class="p">{</span>
  <span class="n">CORE_PRIVACY_SCOPE_SESSION</span> <span class="o">=</span> <span class="mh">0x01</span><span class="p">,</span> <span class="cm">/* use session-specific keys */</span>
  <span class="n">CORE_PRIVACY_SCOPE_DEVICE</span>  <span class="o">=</span> <span class="mh">0x02</span><span class="p">,</span> <span class="cm">/* use device-specific keys  */</span>
  <span class="n">CORE_PRIVACY_SCOPE_USER</span>    <span class="o">=</span> <span class="mh">0x03</span><span class="p">,</span> <span class="cm">/* use user-specific keys    */</span>
  <span class="n">CORE_PRIVACY_SCOPE_AGENT</span>   <span class="o">=</span> <span class="mh">0x04</span><span class="p">,</span> <span class="cm">/* use agent-specific keys   */</span>
<span class="p">}</span> <span class="n">e_core_privacy_scope_t</span><span class="p">;</span>
</code></pre>
<pre class="highlight java"><code><span class="kd">public</span> <span class="kd">abstract</span> <span class="kd">class</span> <span class="nc">RDNA</span> <span class="o">{</span>
  <span class="c1">//..</span>
  <span class="kd">public</span> <span class="kd">enum</span> <span class="n">RDNAPrivacyScope</span> <span class="o">{</span>
    <span class="n">RDNA_PRIVACY_SCOPE_SESSION</span><span class="o">(</span><span class="mi">1</span><span class="o">),</span> <span class="cm">/* use session-specific keys */</span>
    <span class="n">RDNA_PRIVACY_SCOPE_DEVICE</span><span class="o">(</span><span class="mi">2</span><span class="o">),</span>  <span class="cm">/* use device-specific keys */</span>
    <span class="n">RDNA_PRIVACY_SCOPE_USER</span><span class="o">(</span><span class="mi">3</span><span class="o">),</span>    <span class="cm">/* use user-specific keys */</span>
    <span class="n">RDNA_PRIVACY_SCOPE_AGENT</span><span class="o">(</span><span class="mi">4</span><span class="o">);</span>   <span class="cm">/* use agent-specific keys */</span>
  <span class="o">}</span>
  <span class="c1">//..</span>
<span class="o">}</span>
</code></pre>
<pre class="highlight objective_c"><code><span class="k">typedef</span> <span class="nf">NS_ENUM</span><span class="p">(</span><span class="n">NSInteger</span><span class="p">,</span> <span class="n">RDNAPrivacyScope</span><span class="p">)</span> <span class="p">{</span>
  <span class="n">RDNA_PRIVACY_SCOPE_SESSION</span> <span class="o">=</span> <span class="mh">0x01</span><span class="p">,</span>  <span class="cm">/* use session-specific keys */</span>
  <span class="n">RDNA_PRIVACY_SCOPE_DEVICE</span> <span class="o">=</span> <span class="mh">0x02</span><span class="p">,</span>   <span class="cm">/* use device-specific keys  */</span>
  <span class="n">RDNA_PRIVACY_SCOPE_USER</span> <span class="o">=</span> <span class="mh">0x03</span><span class="p">,</span>     <span class="cm">/* use user-specific keys    */</span>
  <span class="n">RDNA_PRIVACY_SCOPE_AGENT</span> <span class="o">=</span> <span class="mh">0x04</span><span class="p">,</span>    <span class="cm">/* use agent-specific keys   */</span>
<span class="p">};</span>
</code></pre>
<pre class="highlight cpp"><code><span class="k">typedef</span> <span class="k">enum</span> <span class="p">{</span>
  <span class="n">RDNA_PRIVACY_SCOPE_SESSION</span> <span class="o">=</span> <span class="mh">0x01</span><span class="p">,</span> <span class="cm">/* use session-specific keys */</span>
  <span class="n">RDNA_PRIVACY_SCOPE_DEVICE</span>  <span class="o">=</span> <span class="mh">0x02</span><span class="p">,</span> <span class="cm">/* use device-specific keys  */</span>
  <span class="n">RDNA_PRIVACY_SCOPE_USER</span>    <span class="o">=</span> <span class="mh">0x03</span><span class="p">,</span> <span class="cm">/* use user-specific keys    */</span>
  <span class="n">RDNA_PRIVACY_SCOPE_AGENT</span>   <span class="o">=</span> <span class="mh">0x04</span><span class="p">,</span> <span class="cm">/* use agent-specific keys   */</span>
<span class="p">}</span> <span class="n">RDNAPrivacyScope</span><span class="p">;</span>
</code></pre>

<table><thead>
<tr>
<th>Scope</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>RDNA_PRIVACY_SCOPE_SESSION</td>
<td>Keys used are specific to the REL-ID session and valid for duration of the session.<br>Used to secure the privacy of data in transit between the API-client application and the REL-ID DNA, as well as between the API-client application and its backend services.<br>Depending on the current state of the API-Runtime, the retrieved key will be either belonging to the current application (PRIMARY) REL-ID session or to the current user (SECONDARY) REL-ID session.</td>
</tr>
<tr>
<td>RDNA_PRIVACY_SCOPE_DEVICE</td>
<td>Keys used are specific to the end-point device.<br>Used by the API-client application to secure the privacy of persistent data that the API-client application would store on the device.</td>
</tr>
<tr>
<td>RDNA_PRIVACY_SCOPE_USER</td>
<td>Keys used are specific to the authenticated user-identity.<br>This is relevant ONLY when the Advanced API (User-Interaction) is used.</td>
</tr>
<tr>
<td>RDNA_PRIVACY_SCOPE_AGENT</td>
<td>Keys used are specific to the agent (i.e. the application using the API)</td>
</tr>
</tbody></table>

<h2 id="cipher-specifications">Cipher Specifications</h2>

<p>The cipher specification details contain the cipher algorithm to be used for encryption/decryption (along with its key length, mode and padding) and the digest algorithm to be used for generating HMAC (Hash-based message authentication code) of the encrypted data for data integrity check.
The format for cipher specification is [CIPHER_ALGO_SPECS]:[DIGEST_ALGO_SPECS]. 
For example: AES/256/CBC/PKCS7Padding:SHA-1, where &ldquo;AES/256/CBC/PKCS7Padding&rdquo; is the cipher algorithm specification and &ldquo;SHA-1&rdquo; is the HMAC digest specification (optional). </p>

<p>The API-Client can also choose to use default Cipher Spec (&ldquo;AES/256/CFB/PKCS7Padding:SHA-256&rdquo;) and default Cipher Salt/IV available in the API-SDK. The API-Client can get the default Cipher Spec and Salt of the API-Runtime context using the GetDefaultCipherSpec and GetDefaultCipherSalt APIs. These default CipherSpec and CipherSalt can be overridden by passing these information in the <code class="prettyprint">Initialize</code> API.</p>

<p>The API-Client can use a separate Cipher Spec and Salt/IV for a specific call of Data Privacy APIs or can send empty details to use the default Cipher Spec and Salt/IV. But note that while using the Data Privacy APIs for session-scope privy service, the API-Client should make sure that it either sends empty or same CipherSpec/Salt as the default so that service provider can make use of the encrypted data.</p>

<aside class="notice"><b><u>Session-Scope Cipher Details</u></b> -
<br>
The way in which session-scope privacy works is as follows:
<li>The API-client application invokes an <u>Encrypt</u> API routine with <i>Session</i> privacy scope and sends the encrypted data via an access port
<li>The DNA receives the data and decrypts it, before sending the data across to the backend service
<li>The DNA receives the response from the backend service, and encrypts it before sending it back to the API-client application
<li>The API-client application receives the encrypted response, and subsequently invokes a <u>Decrypt</u> API routine  with <i>Session</i> privacy scope before processing the plaintext response.
<li>Hence the API-Client should make sure that it either sends empty or same CipherSpec/Salt as the default so that service provider can make use of the encrypted data. The DNA will use the default cipher details (can be overridden by the supplied details in the <u>Initialize</u> routine).
</aside>
<pre class="highlight c"><code><span class="kt">int</span>
<span class="n">coreGetDefaultCipherSpec</span>
<span class="p">(</span><span class="kt">void</span><span class="o">*</span>  <span class="n">pvRuntimeCtx</span><span class="p">,</span>
 <span class="kt">char</span><span class="o">**</span> <span class="n">psDefCipherSpecs</span><span class="p">);</span>

<span class="kt">int</span>
<span class="n">coreGetDefaultCipherSalt</span>
<span class="p">(</span><span class="kt">void</span><span class="o">*</span>  <span class="n">pvRuntimeCtx</span><span class="p">,</span>
 <span class="kt">char</span><span class="o">*</span>  <span class="n">sDefCipherSalt</span><span class="p">);</span>
</code></pre>
<pre class="highlight java"><code><span class="kd">public</span> <span class="kd">abstract</span> <span class="kd">class</span> <span class="nc">RDNA</span> <span class="o">{</span>
  <span class="c1">//..</span>
  <span class="kd">public</span> <span class="kd">abstract</span> <span class="n">RDNAStatus</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span> <span class="n">getDefaultCipherSpec</span><span class="o">();</span>
  <span class="kd">public</span> <span class="kd">abstract</span> <span class="n">RDNAStatus</span><span class="o">&lt;</span><span class="kt">byte</span><span class="o">[]&gt;</span> <span class="n">getDefaultCipherSalt</span><span class="o">();</span>
  <span class="c1">//..</span>
<span class="o">}</span>
</code></pre>
<pre class="highlight objective_c"><code><span class="k">@interface</span> <span class="nc">RDNA</span> <span class="p">:</span> <span class="nc">NSObject</span>
  <span class="c1">//..
</span>  <span class="k">-</span> <span class="p">(</span><span class="kt">int</span><span class="p">)</span><span class="nf">getDefaultCipherSpec</span><span class="p">:(</span><span class="n">NSMutableString</span> <span class="o">**</span><span class="p">)</span><span class="nv">cipherSpec</span><span class="p">;</span>
  <span class="k">-</span> <span class="p">(</span><span class="kt">int</span><span class="p">)</span><span class="nf">getDefaultCipherSalt</span><span class="p">:(</span><span class="n">NSMutableString</span> <span class="o">**</span><span class="p">)</span><span class="nv">cipherSalt</span><span class="p">;</span>
  <span class="c1">//..
</span><span class="k">@end</span>
</code></pre>
<pre class="highlight cpp"><code><span class="k">class</span> <span class="nc">RDNA</span>
<span class="p">{</span>
<span class="k">public</span><span class="o">:</span>
  <span class="c1">//..
</span>  <span class="kt">int</span> <span class="n">getDefaultCipherSpec</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="o">&amp;</span> <span class="n">cipherSpec</span><span class="p">);</span>
  <span class="kt">int</span> <span class="n">getDefaultCipherSalt</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="o">&amp;</span> <span class="n">cipherSalt</span><span class="p">);</span>
  <span class="c1">//..
</span><span class="p">}</span>
</code></pre>

<table><thead>
<tr>
<th>Routine</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>GetDefaultCipherSpec</td>
<td>Get the default cipher spec used in the RDNA context</td>
</tr>
<tr>
<td>GetDefaultCipherSalt</td>
<td>Get the default cipher salt used in the RDNA context</td>
</tr>
</tbody></table>

<p>List of supported cipher algorithm -</p>

<table><thead>
<tr>
<th>Cipher algo</th>
<th>Key length</th>
<th>Mode</th>
<th>Padding</th>
</tr>
</thead><tbody>
<tr>
<td><li>AES</td>
<td><li>128<li>192<li>256</td>
<td><li>ECB<li>CBC<li>PCBC<li>CFB<li>OFB<li>CTR</td>
<td><li>NoPadding<li>PKCS7Padding<li>ISO10126Padding</td>
</tr>
</tbody></table>

<p>List of supported digest algorithm -</p>

<ul>
<li>MD5</li>
<li>SHA-1</li>
<li>SHA-256</li>
<li>SHA-384</li>
<li>SHA-512</li>
</ul>

<h2 id="raw-data-in-packets">Raw Data (in packets)</h2>
<pre class="highlight c"><code><span class="kt">int</span>
<span class="n">coreEncryptDataPacket</span>
<span class="p">(</span><span class="kt">void</span><span class="o">*</span>  <span class="n">pvRuntimeCtx</span><span class="p">,</span>
 <span class="n">e_core_privacy_scope_t</span>
        <span class="n">ePrivScope</span><span class="p">,</span>
 <span class="kt">char</span><span class="o">*</span>  <span class="n">sCipherSpecs</span><span class="p">,</span>
 <span class="kt">char</span><span class="o">*</span>  <span class="n">sCipherSalt</span><span class="p">,</span>
 <span class="kt">void</span><span class="o">*</span>  <span class="n">plainText</span><span class="p">,</span>
 <span class="kt">int</span>    <span class="n">plainTextLen</span><span class="p">,</span>
 <span class="kt">void</span><span class="o">**</span> <span class="n">cipherText</span><span class="p">,</span>
 <span class="kt">int</span><span class="o">*</span>   <span class="n">cipherTextLen</span><span class="p">);</span>

<span class="kt">int</span>
<span class="n">coreDecryptDataPacket</span>
<span class="p">(</span><span class="kt">void</span><span class="o">*</span>  <span class="n">pvRuntimeCtx</span><span class="p">,</span>
 <span class="n">e_core_privacy_scope_t</span>
        <span class="n">ePrivScope</span><span class="p">,</span>
 <span class="kt">char</span><span class="o">*</span>  <span class="n">sCipherSpecs</span><span class="p">,</span>
 <span class="kt">char</span><span class="o">*</span>  <span class="n">sCipherSalt</span><span class="p">,</span>
 <span class="kt">void</span><span class="o">*</span>  <span class="n">cipherText</span><span class="p">,</span>
 <span class="kt">int</span>    <span class="n">cipherTextLen</span><span class="p">,</span>
 <span class="kt">void</span><span class="o">**</span> <span class="n">plainText</span><span class="p">,</span>
 <span class="kt">int</span><span class="o">*</span>   <span class="n">plainTextLen</span><span class="p">);</span>
</code></pre>
<pre class="highlight java"><code><span class="kd">public</span> <span class="kd">abstract</span> <span class="kd">class</span> <span class="nc">RDNA</span> <span class="o">{</span>
  <span class="c1">//..</span>
  <span class="kd">public</span> <span class="kd">abstract</span>
    <span class="n">RDNAStatus</span><span class="o">&lt;</span><span class="kt">byte</span><span class="o">[]&gt;</span>
    <span class="n">encryptDataPacket</span><span class="o">(</span>
      <span class="n">RDNAPrivacyScope</span>
             <span class="n">privacyScope</span><span class="o">,</span>
      <span class="n">String</span> <span class="n">cipherSpec</span><span class="o">,</span>
      <span class="kt">byte</span><span class="o">[]</span> <span class="n">cipherSalt</span><span class="o">,</span>
      <span class="kt">byte</span><span class="o">[]</span> <span class="n">plainText</span><span class="o">);</span>

  <span class="kd">public</span> <span class="kd">abstract</span>
    <span class="n">RDNAStatus</span><span class="o">&lt;</span><span class="kt">byte</span><span class="o">[]&gt;</span>
    <span class="n">decryptDataPacket</span><span class="o">(</span>
      <span class="n">RDNAPrivacyScope</span>
             <span class="n">privacyScope</span><span class="o">,</span>
      <span class="n">String</span> <span class="n">cipherSpec</span><span class="o">,</span>
      <span class="kt">byte</span><span class="o">[]</span> <span class="n">cipherSalt</span><span class="o">,</span>
      <span class="kt">byte</span><span class="o">[]</span> <span class="n">cipherText</span><span class="o">);</span>
  <span class="c1">//..</span>
<span class="o">}</span>
</code></pre>
<pre class="highlight objective_c"><code><span class="k">@interface</span> <span class="nc">RDNA</span> <span class="p">:</span> <span class="nc">NSObject</span>
  <span class="k">-</span> <span class="p">(</span><span class="kt">int</span><span class="p">)</span><span class="nf">encryptDataPacket</span><span class="p">:(</span><span class="n">RDNAPrivacyScope</span><span class="p">)</span><span class="nv">privacyScope</span>
                <span class="nf">CipherSpec</span><span class="p">:(</span><span class="n">NSString</span> <span class="o">*</span><span class="p">)</span><span class="nv">cipherSpec</span>
                <span class="nf">CipherSalt</span><span class="p">:(</span><span class="n">NSString</span> <span class="o">*</span><span class="p">)</span><span class="nv">cipherSalt</span>
                      <span class="nf">From</span><span class="p">:(</span><span class="n">NSData</span> <span class="o">*</span><span class="p">)</span><span class="nv">plainText</span> 
                      <span class="nf">Into</span><span class="p">:(</span><span class="n">NSMutableData</span> <span class="o">**</span><span class="p">)</span><span class="nv">cipherText</span><span class="p">;</span>

  <span class="k">-</span> <span class="p">(</span><span class="kt">int</span><span class="p">)</span><span class="nf">decryptDataPacket</span><span class="p">:(</span><span class="n">RDNAPrivacyScope</span><span class="p">)</span><span class="nv">privacyScope</span>
                <span class="nf">CipherSpec</span><span class="p">:(</span><span class="n">NSString</span> <span class="o">*</span><span class="p">)</span><span class="nv">cipherSpec</span>
                <span class="nf">CipherSalt</span><span class="p">:(</span><span class="n">NSString</span> <span class="o">*</span><span class="p">)</span><span class="nv">cipherSalt</span>
                      <span class="nf">From</span><span class="p">:(</span><span class="n">NSData</span> <span class="o">*</span><span class="p">)</span><span class="nv">cipherText</span>
                      <span class="nf">Into</span><span class="p">:(</span><span class="n">NSMutableData</span> <span class="o">**</span><span class="p">)</span><span class="nv">plainText</span><span class="p">;</span>
<span class="k">@end</span>
</code></pre>
<pre class="highlight cpp"><code><span class="k">class</span> <span class="nc">RDNA</span>
<span class="p">{</span>
<span class="k">public</span><span class="o">:</span>
  <span class="kt">int</span>
  <span class="n">encryptDataPacket</span>
  <span class="p">(</span><span class="n">RDNAPrivacyScope</span>
               <span class="n">privacyScope</span><span class="p">,</span>
   <span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="n">cipherSpec</span><span class="p">,</span>
   <span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="n">cipherSalt</span><span class="p">,</span>
   <span class="kt">void</span><span class="o">*</span>       <span class="n">plainText</span><span class="p">,</span>
   <span class="kt">int</span>         <span class="n">plainTextLen</span><span class="p">,</span>
   <span class="kt">void</span><span class="o">**</span>      <span class="n">cipherText</span><span class="p">,</span>
   <span class="kt">int</span><span class="o">*</span>        <span class="n">cipherTextLen</span><span class="p">);</span>

  <span class="kt">int</span>
  <span class="n">decryptDataPacket</span>
  <span class="p">(</span><span class="n">RDNAPrivacyScope</span>
               <span class="n">privacyScope</span><span class="p">,</span>
   <span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="n">cipherSpec</span><span class="p">,</span>
   <span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="n">cipherSalt</span><span class="p">,</span>
   <span class="kt">void</span><span class="o">*</span>       <span class="n">cipherText</span><span class="p">,</span>
   <span class="kt">int</span>         <span class="n">cipherTextLen</span><span class="p">,</span>
   <span class="kt">void</span><span class="o">**</span>      <span class="n">plainText</span><span class="p">,</span>
   <span class="kt">int</span><span class="o">*</span>        <span class="n">plainTextLen</span><span class="p">);</span>
<span class="p">}</span>
</code></pre>

<table><thead>
<tr>
<th>Routine</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><b>EncryptDataPacket</b></td>
<td><li>Raw plaintext (unencrypted) data is supplied as a buffer of bytes.<li>This data is encrypted using keys as per specified privacy scope, and returned to calling API-client application.</td>
</tr>
<tr>
<td>&nbsp;</td>
<td>ANSI C, C++ -<li>If the supplied <code class="prettyprint">cipherText</code> and <code class="prettyprint">cipherTextLen</code> are non-null, they are used to store the encrypted output to be returned to caller.<li>If they were null, or if they were insufficient to store the output, then memory is allocated for storing the encrypted output, and these pointers are updated with the details of the allocated memory (buffer pointer and size of buffer)</td>
</tr>
<tr>
<td>&nbsp;</td>
<td>Java, Objective C -<li>The output is always returned as a newly allocated array/buffer (<code class="prettyprint">byte[]</code> in Java, <code class="prettyprint">NSMutableData **</code> in Objective C)</td>
</tr>
<tr>
<td><b>DecryptDataPacket</b></td>
<td><li>Encrypted data is supplied as a buffer of bytes.<li>This data is decrypted using keys as per specified privacy scope, and returned to calling API-client application.</td>
</tr>
<tr>
<td>&nbsp;</td>
<td>ANSI C, C++ -<li>If the supplied <code class="prettyprint">plainText</code> and <code class="prettyprint">plainTextLen</code> are non-null, they are used to store the decrypted output to be returned to caller.<li>If they were null, or if they were insufficient to store the output, then memory is allocated for storing the encrypted output, and these pointers are updated with the details of the allocated memory (buffer pointer and size of buffer)<li>Recommended method is to supply input encrypted buffer itself in these output parameters, since it will definitely be larger than or equal to what would be required to store the decrypted output. Moreover, if this is not done, the routine will not reuse the input encrypted buffer by itself</td>
</tr>
<tr>
<td>&nbsp;</td>
<td>Java, Objective C -<li>The output is always returned as a newly allocated array/buffer (<code class="prettyprint">byte[]</code> in Java, <code class="prettyprint">NSMutableData **</code> in Objective C)</td>
</tr>
</tbody></table>

<aside class="notice"><b><u>Session Scope</u></b> -
<br>When used with session scope, the API-Client should use the default CipherSpec/Salt so that service provider can make use of the encrypted data (remember?)
</aside>

<h2 id="http-requests-responses">HTTP Requests/Responses</h2>
<pre class="highlight c"><code><span class="kt">int</span>
<span class="n">coreEncryptHttpRequest</span>
<span class="p">(</span><span class="kt">void</span><span class="o">*</span>  <span class="n">pvRuntimeCtx</span><span class="p">,</span>
 <span class="n">e_core_privacy_scope_t</span>
        <span class="n">ePrivScope</span><span class="p">,</span>
 <span class="kt">char</span><span class="o">*</span>  <span class="n">sCipherSpecs</span><span class="p">,</span>
 <span class="kt">char</span><span class="o">*</span>  <span class="n">sCipherSalt</span><span class="p">,</span>
 <span class="kt">char</span><span class="o">*</span>  <span class="n">request</span><span class="p">,</span>
 <span class="kt">int</span>    <span class="n">requestLen</span><span class="p">,</span>
 <span class="kt">char</span><span class="o">**</span> <span class="n">transformedRequest</span><span class="p">,</span>
 <span class="kt">int</span><span class="o">*</span>   <span class="n">transformedRequestLen</span><span class="p">);</span>

<span class="kt">int</span>
<span class="n">coreDecryptHttpResponse</span>
<span class="p">(</span><span class="kt">void</span><span class="o">*</span>  <span class="n">pvRuntimeCtx</span><span class="p">,</span>
 <span class="n">e_core_privacy_scope_t</span>
        <span class="n">ePrivScope</span><span class="p">,</span>
 <span class="kt">char</span><span class="o">*</span>  <span class="n">sCipherSpecs</span><span class="p">,</span>
 <span class="kt">char</span><span class="o">*</span>  <span class="n">sCipherSalt</span><span class="p">,</span>
 <span class="kt">char</span><span class="o">*</span>  <span class="n">transformedResponse</span><span class="p">,</span>
 <span class="kt">int</span>    <span class="n">transformedResponseLen</span><span class="p">,</span>
 <span class="kt">char</span><span class="o">**</span> <span class="n">response</span><span class="p">,</span>
 <span class="kt">int</span><span class="o">*</span>   <span class="n">responseLen</span><span class="p">);</span>
</code></pre>
<pre class="highlight java"><code><span class="kd">public</span> <span class="kd">abstract</span> <span class="kd">class</span> <span class="nc">RDNA</span> <span class="o">{</span>
  <span class="c1">//..</span>
  <span class="kd">public</span> <span class="kd">abstract</span>
    <span class="n">RDNAStatus</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span>
    <span class="n">encryptHttpRequest</span><span class="o">(</span>
      <span class="n">RDNAPrivacyScope</span>
             <span class="n">privacyScope</span><span class="o">,</span>
      <span class="n">String</span> <span class="n">cipherSpec</span><span class="o">,</span>
      <span class="kt">byte</span><span class="o">[]</span> <span class="n">cipherSalt</span><span class="o">,</span>
      <span class="n">String</span> <span class="n">request</span><span class="o">);</span>

  <span class="kd">public</span> <span class="kd">abstract</span>
    <span class="n">RDNAStatus</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span>
    <span class="n">decryptHttpResponse</span><span class="o">(</span>
      <span class="n">RDNAPrivacyScope</span>
             <span class="n">privacyScope</span><span class="o">,</span>
      <span class="n">String</span> <span class="n">cipherSpec</span><span class="o">,</span>
      <span class="kt">byte</span><span class="o">[]</span> <span class="n">cipherSalt</span><span class="o">,</span>
      <span class="n">String</span> <span class="n">transformedResponse</span><span class="o">);</span>
  <span class="c1">//..</span>
<span class="o">}</span>
</code></pre>
<pre class="highlight objective_c"><code><span class="k">@interface</span> <span class="nc">RDNA</span> <span class="p">:</span> <span class="nc">NSObject</span>
  <span class="k">-</span> <span class="p">(</span><span class="kt">int</span><span class="p">)</span><span class="nf">encryptHttpRequest</span><span class="p">:(</span><span class="n">RDNAPrivacyScope</span><span class="p">)</span><span class="nv">privacyScope</span>
                 <span class="nf">CipherSpec</span><span class="p">:(</span><span class="n">NSString</span> <span class="o">*</span><span class="p">)</span><span class="nv">cipherSpec</span>
                 <span class="nf">CipherSalt</span><span class="p">:(</span><span class="n">NSString</span> <span class="o">*</span><span class="p">)</span><span class="nv">cipherSalt</span>
                       <span class="nf">From</span><span class="p">:(</span><span class="n">NSString</span> <span class="o">*</span><span class="p">)</span><span class="nv">request</span>
                       <span class="nf">Into</span><span class="p">:(</span><span class="n">NSMutableString</span> <span class="o">**</span><span class="p">)</span><span class="nv">transformedRequest</span><span class="p">;</span>

  <span class="k">-</span> <span class="p">(</span><span class="kt">int</span><span class="p">)</span><span class="nf">decryptHttpResponse</span><span class="p">:(</span><span class="n">RDNAPrivacyScope</span><span class="p">)</span><span class="nv">privacyScope</span>
                  <span class="nf">CipherSpec</span><span class="p">:(</span><span class="n">NSString</span> <span class="o">*</span><span class="p">)</span><span class="nv">cipherSpec</span>
                  <span class="nf">CipherSalt</span><span class="p">:(</span><span class="n">NSString</span> <span class="o">*</span><span class="p">)</span><span class="nv">cipherSalt</span>
                        <span class="nf">From</span><span class="p">:(</span><span class="n">NSString</span> <span class="o">*</span><span class="p">)</span><span class="nv">transformedResponse</span>
                        <span class="nf">Into</span><span class="p">:(</span><span class="n">NSMutableString</span> <span class="o">**</span><span class="p">)</span><span class="nv">response</span><span class="p">;</span>
<span class="k">@end</span>
</code></pre>
<pre class="highlight cpp"><code><span class="k">class</span> <span class="nc">RDNA</span>
<span class="p">{</span>
<span class="k">public</span><span class="o">:</span>
  <span class="kt">int</span>
  <span class="n">encryptHttpRequest</span>
  <span class="p">(</span><span class="n">RDNAPrivacyScope</span>
               <span class="n">privacyScope</span><span class="p">,</span>
   <span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="n">cipherSpec</span><span class="p">,</span>
   <span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="n">cipherSalt</span><span class="p">,</span>
   <span class="kt">char</span><span class="o">*</span>       <span class="n">request</span><span class="p">,</span>
   <span class="kt">int</span>         <span class="n">requestLen</span><span class="p">,</span>
   <span class="kt">char</span><span class="o">**</span>      <span class="n">transformedRequest</span><span class="p">,</span>
   <span class="kt">int</span><span class="o">*</span>        <span class="n">transformedRequestLen</span><span class="p">);</span>

  <span class="kt">int</span>
  <span class="n">decryptHttpResponse</span>
  <span class="p">(</span><span class="n">RDNAPrivacyScope</span>
               <span class="n">privacyScope</span><span class="p">,</span>
   <span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="n">cipherSpec</span><span class="p">,</span>
   <span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="n">cipherSalt</span><span class="p">,</span>
   <span class="kt">char</span><span class="o">*</span>       <span class="n">transformedResponse</span><span class="p">,</span>
   <span class="kt">int</span>         <span class="n">transformedResponseLen</span><span class="p">,</span>
   <span class="kt">char</span><span class="o">**</span>      <span class="n">response</span><span class="p">,</span>
   <span class="kt">int</span><span class="o">*</span>        <span class="n">responseLen</span><span class="p">);</span>
<span class="p">}</span>
</code></pre>

<table><thead>
<tr>
<th>Routine</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><b>EncryptHttpRequest</b></td>
<td><li>HTTP request in plaintext (unencrypted) form is supplied as a buffer of bytes.<li>This request is encrypted using keys as per specified privacy scope, encoded appropriately, wrapped around in an HTTP request envelope and returned back to calling API-client application as another HTTP request.</td>
</tr>
<tr>
<td>&nbsp;</td>
<td>ANSI C, C++ -<li>If the supplied <code class="prettyprint">transformedRequest</code> and <code class="prettyprint">transformedRequestLen</code> are non-null, they are used to store the encrypted output to be returned to caller.<li>If they were null, or if they were insufficient to store the output, then memory is allocated for storing the encrypted output, and these pointers are updated with the details of the allocated memory (buffer pointer and size of buffer)</td>
</tr>
<tr>
<td>&nbsp;</td>
<td>Java, Objective C -<li>The output is always returned as a newly allocated String (<code class="prettyprint">String</code> in Java, <code class="prettyprint">NSMutableString **</code> in Objective C)</td>
</tr>
<tr>
<td><b>DecryptHttpResponse</b></td>
<td><li>HTTP response in encrypted form is supplied as a buffer of bytes.<li>This response is parsed, the embedded encrypted HTTP response is decoded, decrypted using keys as per specified scope, and returned back to calling API-client application as the original plaintext HTTP response.</td>
</tr>
<tr>
<td>&nbsp;</td>
<td>ANSI C, C++ -<li>If the supplied <code class="prettyprint">response</code> and <code class="prettyprint">responseLen</code> are non-null, they are used to store the decrypted output to be returned to caller.<li>If they were null, or if they were insufficient to store the output, then memory is allocated for storing the encrypted output, and these pointers are updated with the details of the allocated memory (buffer pointer and size of buffer)<li>Recommended method is to supply input encrypted buffer itself in these output parameters, since it will definitely be larger than or equal to what would be required to store the decrypted output. Moreover, if this is not done, the routine will not reuse the input encrypted buffer by itself</td>
</tr>
<tr>
<td>&nbsp;</td>
<td>Java, Objective C -<li>The output is always returned as a newly allocated String (<code class="prettyprint">String</code> in Java, <code class="prettyprint">NSMutableString **</code> in Objective C)</td>
</tr>
</tbody></table>

<aside class="notice"><b><u>Session Scope</u></b> -
<br>When used with session scope, the API-Client should use the default CipherSpec/Salt so that service provider can make use of the encrypted data (remember?)
</aside>

<h2 id="privacy-streams">Privacy Streams</h2>
<pre class="highlight c"><code><span class="k">typedef</span> <span class="k">enum</span> <span class="p">{</span>
  <span class="n">RDNA_STREAM_TYPE_ENCRYPT</span> <span class="o">=</span> <span class="mh">0x00</span><span class="p">,</span> <span class="cm">/* Encrypts input data */</span>
  <span class="n">RDNA_STREAM_TYPE_DECRYPT</span> <span class="o">=</span> <span class="mh">0x01</span><span class="p">,</span> <span class="cm">/* Decrypts input data */</span>
<span class="p">}</span> <span class="n">e_core_stream_type_t</span><span class="p">;</span>

<span class="k">typedef</span> <span class="kt">int</span>
<span class="p">(</span><span class="o">*</span><span class="n">fn_block_ready_t</span><span class="p">)</span>
<span class="p">(</span><span class="kt">void</span><span class="o">*</span>  <span class="n">pvStream</span><span class="p">,</span>
 <span class="kt">void</span><span class="o">*</span>  <span class="n">pvBlockReadyCtx</span><span class="p">,</span>
 <span class="kt">unsigned</span> <span class="kt">char</span><span class="o">*</span>  <span class="n">pvBlockBuf</span><span class="p">,</span>
 <span class="kt">int</span>    <span class="n">nBlockSize</span><span class="p">);</span>

<span class="kt">int</span>
<span class="n">coreCreatePrivacyStream</span>
<span class="p">(</span><span class="kt">void</span><span class="o">*</span>  <span class="n">pvRuntimeCtx</span><span class="p">,</span>
 <span class="n">e_core_stream_type_t</span>
        <span class="n">eStreamType</span><span class="p">,</span>
 <span class="n">e_core_privacy_scope_t</span>
        <span class="n">ePrivScope</span><span class="p">,</span>
 <span class="kt">char</span><span class="o">*</span>  <span class="n">sCipherSpecs</span><span class="p">,</span>
 <span class="kt">char</span><span class="o">*</span>  <span class="n">sCipherSalt</span><span class="p">,</span>
 <span class="kt">int</span>    <span class="n">nBlockReadyThreshold</span><span class="p">,</span>
 <span class="n">fn_block_ready_t</span> <span class="n">cbfnBlockReady</span><span class="p">,</span>
 <span class="kt">void</span><span class="o">*</span>  <span class="n">pvBlockReadyCtx</span><span class="p">,</span>
 <span class="kt">void</span><span class="o">**</span> <span class="n">pvStream</span><span class="p">);</span>

<span class="kt">int</span>
<span class="n">coreStreamGetPrivacyScope</span>
<span class="p">(</span><span class="kt">void</span><span class="o">*</span>  <span class="n">pvStream</span><span class="p">,</span>
 <span class="n">e_core_privacy_scope_t</span><span class="o">*</span>
        <span class="n">pePrivScope</span><span class="p">);</span>

<span class="kt">int</span>
<span class="n">coreStreamGetStreamType</span>
<span class="p">(</span><span class="kt">void</span><span class="o">*</span>  <span class="n">pvStream</span><span class="p">,</span>
 <span class="n">e_core_stream_type_t</span><span class="o">*</span>
        <span class="n">peStreamType</span><span class="p">);</span>

<span class="kt">int</span>
<span class="n">coreStreamWriteDataIntoStream</span>
<span class="p">(</span><span class="kt">void</span><span class="o">*</span>  <span class="n">pvStream</span><span class="p">,</span>
 <span class="kt">unsigned</span> <span class="kt">char</span><span class="o">*</span>  <span class="n">pDataBuf</span><span class="p">,</span>
 <span class="kt">int</span>    <span class="n">nDataLen</span><span class="p">);</span>

<span class="kt">int</span>
<span class="n">coreStreamEndStream</span>
<span class="p">(</span><span class="kt">void</span><span class="o">*</span>  <span class="n">pvStream</span><span class="p">);</span>

<span class="kt">int</span>
<span class="n">coreStreamDestroy</span>
<span class="p">(</span><span class="kt">void</span><span class="o">*</span>  <span class="n">pvStream</span><span class="p">);</span>
</code></pre>
<pre class="highlight java"><code><span class="kd">public</span> <span class="kd">abstract</span> <span class="kd">class</span> <span class="nc">RDNA</span> <span class="o">{</span>
  <span class="c1">//..</span>
  <span class="kd">public</span> <span class="kd">enum</span> <span class="n">RDNAStreamType</span> <span class="o">{</span>
    <span class="n">RDNA_STREAM_TYPE_ENCRYPT</span><span class="o">(</span><span class="mi">0</span><span class="o">),</span>
    <span class="n">RDNA_STREAM_TYPE_DECRYPT</span><span class="o">(</span><span class="mi">1</span><span class="o">);</span>
  <span class="o">};</span>

  <span class="kd">public</span> <span class="kd">static</span> <span class="kd">interface</span>
  <span class="nc">RDNAPrivacyStreamCallBacks</span> <span class="o">{</span>
    <span class="kt">int</span>
    <span class="n">onBlockReady</span>
    <span class="o">(</span><span class="n">RDNAPrivacyStream</span>
            <span class="n">rdnaPrivStream</span><span class="o">,</span>
     <span class="n">Object</span> <span class="n">pvBlockReadyCtx</span><span class="o">,</span>
     <span class="kt">byte</span><span class="o">[]</span> <span class="n">pvBlockBuf</span><span class="o">,</span>
     <span class="kt">int</span>    <span class="n">nBlockSize</span><span class="o">);</span>
  <span class="o">};</span>

  <span class="kd">public</span> <span class="kd">static</span> <span class="kd">interface</span> <span class="nc">RDNAPrivacyStream</span> <span class="o">{</span>
    <span class="kd">public</span> <span class="n">RDNAStatus</span><span class="o">&lt;</span><span class="n">RDNAPrivacyScope</span><span class="o">&gt;</span> <span class="n">getPrivacyScope</span><span class="o">();</span>
    <span class="kd">public</span> <span class="n">RDNAStatus</span><span class="o">&lt;</span><span class="n">RDNAStreamType</span><span class="o">&gt;</span> <span class="n">getStreamType</span><span class="o">();</span>
    <span class="kd">public</span> <span class="kt">int</span> <span class="n">writeDataIntoStream</span> <span class="o">(</span><span class="kt">byte</span><span class="o">[]</span> <span class="n">data</span><span class="o">);</span>
    <span class="kd">public</span> <span class="kt">int</span> <span class="n">endStream</span><span class="o">();</span>
    <span class="kd">public</span> <span class="kt">int</span> <span class="n">destroy</span><span class="o">();</span>
  <span class="o">}</span>

  <span class="kd">public</span> <span class="kd">abstract</span>
    <span class="n">RDNAStatus</span><span class="o">&lt;</span><span class="n">RDNAPrivacyStream</span><span class="o">&gt;</span>
    <span class="n">createPrivacyStream</span>
    <span class="o">(</span><span class="n">RDNAStreamType</span>
            <span class="n">streamType</span><span class="o">,</span>
     <span class="n">RDNAPrivacyScope</span>
            <span class="n">privacyScope</span><span class="o">,</span>
     <span class="n">String</span> <span class="n">cipherSpecs</span><span class="o">,</span>
     <span class="n">String</span> <span class="n">cipherSalt</span><span class="o">,</span>
     <span class="kt">int</span>    <span class="n">blockReadyThreshold</span><span class="o">,</span>
     <span class="n">RDNAPrivacyStreamCallBacks</span>
            <span class="n">callbacks</span><span class="o">,</span>
     <span class="n">Object</span> <span class="n">pvBlockReadyCtx</span><span class="o">);</span>
  <span class="c1">//..</span>
<span class="o">}</span>
</code></pre>
<pre class="highlight objective_c"><code><span class="k">typedef</span> <span class="nf">NS_ENUM</span><span class="p">(</span><span class="n">NSInteger</span><span class="p">,</span> <span class="n">RDNAStreamType</span><span class="p">)</span> <span class="p">{</span>
  <span class="n">RDNA_STREAM_TYPE_ENCRYPT</span> <span class="o">=</span> <span class="mh">0x00</span><span class="p">,</span>
  <span class="n">RDNA_STREAM_TYPE_DECRYPT</span> <span class="o">=</span> <span class="mh">0x01</span><span class="p">,</span>
<span class="p">};</span>

<span class="k">@protocol</span> <span class="nc">RDNAPrivacyStreamCallBacks</span>

  <span class="err">@required</span>

  <span class="o">-</span> <span class="p">(</span><span class="kt">int</span><span class="p">)</span><span class="n">onBlockReadyFor</span><span class="o">:</span><span class="p">(</span><span class="n">RDNAPrivacyStream</span> <span class="o">*</span><span class="p">)</span><span class="n">rdnaPrivStream</span>
       <span class="n">BlockReadyContext</span><span class="o">:</span><span class="p">(</span><span class="n">id</span><span class="p">)</span><span class="n">pvBlockReadyCtx</span>
      <span class="n">PrivacyBlockBuffer</span><span class="o">:</span><span class="p">(</span><span class="n">NSData</span> <span class="o">*</span><span class="p">)</span><span class="n">pvBlockBuf</span>
            <span class="n">andBlockSize</span><span class="o">:</span><span class="p">(</span><span class="kt">int</span><span class="p">)</span><span class="n">nBlockSize</span><span class="p">;</span>
<span class="k">@end</span>

<span class="k">@interface</span> <span class="nc">RDNAPrivacyStream</span> <span class="p">:</span> <span class="nc">NSObject</span> <span class="p">{</span>
    <span class="k">@public</span>
    <span class="n">id</span> <span class="o">&lt;</span><span class="n">RDNAPrivacyStreamCallBacks</span><span class="o">&gt;</span> <span class="n">callBack</span><span class="p">;</span>
    <span class="kt">void</span> <span class="o">*</span><span class="n">corePrivyStream</span><span class="p">;</span>
<span class="p">}</span>
  <span class="o">-</span> <span class="p">(</span><span class="kt">int</span><span class="p">)</span><span class="n">getPrivacyScope</span><span class="o">:</span><span class="p">(</span><span class="n">RDNAPrivacyScope</span> <span class="o">*</span><span class="p">)</span><span class="n">privacyScope</span><span class="p">;</span>
  <span class="k">-</span> <span class="p">(</span><span class="kt">int</span><span class="p">)</span><span class="nf">getStreamType</span><span class="p">:(</span><span class="n">RDNAStreamType</span> <span class="o">*</span><span class="p">)</span><span class="nv">streamType</span><span class="p">;</span>
  <span class="k">-</span> <span class="p">(</span><span class="kt">int</span><span class="p">)</span><span class="nf">writeDataIntoStream</span><span class="p">:(</span><span class="n">NSData</span> <span class="o">*</span><span class="p">)</span><span class="nv">data</span><span class="p">;</span>
  <span class="k">-</span> <span class="p">(</span><span class="kt">int</span><span class="p">)</span><span class="n">endStream</span><span class="p">;</span>
  <span class="k">-</span> <span class="p">(</span><span class="kt">int</span><span class="p">)</span><span class="n">destroy</span><span class="p">;</span>
<span class="k">@end</span>

<span class="k">@interface</span> <span class="nc">RDNA</span> <span class="p">:</span> <span class="nc">NSObject</span>
  <span class="c1">//..
</span>  <span class="k">-</span> <span class="p">(</span><span class="kt">int</span><span class="p">)</span><span class="nf">createPrivacyStreamFor</span><span class="p">:(</span><span class="n">RDNAStreamType</span><span class="p">)</span><span class="nv">streamType</span>
                   <span class="nf">PrivacyScope</span><span class="p">:(</span><span class="n">RDNAPrivacyScope</span><span class="p">)</span><span class="nv">privacyScope</span>
                     <span class="nf">CipherSpec</span><span class="p">:(</span><span class="n">NSString</span> <span class="o">*</span><span class="p">)</span><span class="nv">cipherSpec</span>
                     <span class="nf">CipherSalt</span><span class="p">:(</span><span class="n">NSString</span> <span class="o">*</span><span class="p">)</span><span class="nv">cipherSalt</span>
            <span class="nf">BlockReadyThreshold</span><span class="p">:(</span><span class="kt">int</span><span class="p">)</span><span class="nv">blockReadyThreshold</span>
     <span class="nf">RDNAPrivacyStreamCallBacks</span><span class="p">:(</span><span class="n">id</span><span class="o">&lt;</span><span class="n">RDNAPrivacyStreamCallBacks</span><span class="o">&gt;</span><span class="p">)</span><span class="nv">callbacks</span>
              <span class="nf">BlockReadyContext</span><span class="p">:(</span><span class="n">id</span><span class="p">)</span><span class="nv">pvBlockReadyCtx</span>
              <span class="nf">RDNAPrivacyStream</span><span class="p">:(</span><span class="n">RDNAPrivacyStream</span> <span class="o">**</span><span class="p">)</span><span class="nv">privStream</span><span class="p">;</span>
  <span class="c1">//..
</span><span class="k">@end</span>
</code></pre>
<pre class="highlight cpp"><code><span class="k">typedef</span> <span class="k">enum</span> <span class="p">{</span>
  <span class="n">RDNA_STREAM_TYPE_ENCRYPT</span> <span class="o">=</span> <span class="mh">0x00</span><span class="p">,</span>   <span class="cm">/* a stream for encrypting */</span>
  <span class="n">RDNA_STREAM_TYPE_DECRYPT</span> <span class="o">=</span> <span class="mh">0x01</span><span class="p">,</span>   <span class="cm">/* a stream for decrypting */</span>
<span class="p">}</span> <span class="n">RDNAStreamType</span><span class="p">;</span>

<span class="k">class</span> <span class="nc">RDNAPrivacyStreamCallBacks</span>
<span class="p">{</span>
<span class="k">public</span><span class="o">:</span>
  <span class="k">virtual</span>
  <span class="kt">int</span>
  <span class="n">onBlockReady</span>
  <span class="p">(</span><span class="n">RDNAPrivacyStream</span><span class="o">*</span>
          <span class="n">rdnaPrivStream</span><span class="p">,</span>
   <span class="kt">void</span><span class="o">*</span>  <span class="n">pvBlockReadyCtx</span><span class="p">,</span>
   <span class="kt">unsigned</span> <span class="kt">char</span><span class="o">*</span>
          <span class="n">pvBlockBuf</span><span class="p">,</span>
   <span class="kt">int</span>    <span class="n">nBlockSize</span><span class="p">)</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">};</span>

<span class="k">class</span> <span class="nc">RDNAPrivacyStream</span>
<span class="p">{</span>
<span class="k">public</span><span class="o">:</span>
  <span class="kt">int</span> <span class="n">getPrivacyScope</span><span class="p">(</span><span class="n">RDNAPrivacyScope</span><span class="o">&amp;</span> <span class="n">privacyScope</span><span class="p">);</span>
  <span class="kt">int</span> <span class="n">getStreamType</span><span class="p">(</span><span class="n">RDNAStreamType</span><span class="o">&amp;</span> <span class="n">streamType</span><span class="p">);</span>
  <span class="kt">int</span> <span class="n">writeDataIntoStream</span><span class="p">(</span><span class="kt">unsigned</span> <span class="kt">char</span><span class="o">*</span> <span class="n">data</span><span class="p">,</span> <span class="kt">int</span> <span class="n">dataLen</span><span class="p">);</span>
  <span class="kt">int</span> <span class="n">endStream</span><span class="p">();</span>
  <span class="kt">int</span> <span class="n">destroy</span><span class="p">();</span>
<span class="p">};</span>

<span class="k">class</span> <span class="nc">RDNA</span>
<span class="p">{</span>
<span class="k">public</span><span class="o">:</span>
  <span class="kt">int</span>
  <span class="n">createPrivacyStream</span>
  <span class="p">(</span><span class="n">RDNAStreamType</span>
               <span class="n">streamType</span><span class="p">,</span>
   <span class="n">RDNAPrivacyScope</span>
               <span class="n">privacyScope</span><span class="p">,</span>
   <span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="n">cipherSpec</span><span class="p">,</span>
   <span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="n">cipherSalt</span><span class="p">,</span>
   <span class="kt">int</span>         <span class="n">blockReadyThreshold</span><span class="p">,</span>
   <span class="n">RDNAPrivacyStreamCallBacks</span><span class="o">*</span>
               <span class="n">callbacks</span><span class="p">,</span>
   <span class="kt">void</span><span class="o">*</span>       <span class="n">pvBlockReadyCtx</span><span class="p">,</span>
   <span class="n">RDNAPrivacyStream</span><span class="o">**</span>
               <span class="n">privStream</span><span class="p">);</span>
<span class="p">}</span>
</code></pre>

<table><thead>
<tr>
<th>Routine</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><b>BlockReady Callback</b></td>
<td><li>This is a callback routine supplied by the API-client. This routine is invoked from within the <code class="prettyprint">WriteDataIntoStream</code> routine, when the requisite number of blocks are ready for consumption by the API-client (i.e. when that many blocks have been encrypted/decrypted, depending on the type of the privacy stream<li>In Ansi C, this refers to <code class="prettyprint">fn_block_ready_t</code> and in other languages, this refers to <code class="prettyprint">RDNAPrivacyStreamCallBacks</code> which needs to be implemented by API-Client</td>
</tr>
<tr>
<td><b>CreatePrivacyStream</b></td>
<td><li>Creates a privacy stream using the supplied input - stream type (encryption/decryption), privacy scope, cipher specifications and salt, block ready callback routine and its opaque context reference, number of blocks on which to fire the block ready callback.<li><b>Stream type</b> - whether the data written into the stream should be encrypted/decrypted<li><b>Privacy scope</b> - this determines which key will be used for the encryption/decryption of data written to the stream<li><b>Cipher specs</b> - specifications of the block encryption algorithm and associated parameters to use for encrypting/decrypting data written to the stream<li><b>Cipher salt</b> - additional salt vector to be used when creating the encryption/decryption cipher<li><b>Block ready threshold size</b> - the number of ready blocks on which to invoke the block ready callback routine. It takes a minimum of 1 and maximum of 64 blocks(default). Pass 0 to choose the default value.<li><b>Block ready callback</b> and <b>opaque context reference</b> - callback routine to invoke when specified number blocks are read (encrypted/decrypted), along with an opaque context reference to pass when invoking it<li><b>[OUT] Stream reference</b> - out parameter in which the reference to the newly created privacy stream should be updated</td>
</tr>
<tr>
<td><b>GetPrivacyScope</b></td>
<td>Routine to query and determine the privacy scope (app/device/user/session) of a previously created privacy stream reference</td>
</tr>
<tr>
<td><b>GetStreamType</b></td>
<td>Routine to query and determine the stream type (encrypt/decrypt) of a previously created privacy stream reference</td>
</tr>
<tr>
<td><b>WriteDataIntoStream</b></td>
<td>Routine to write chunks of data into a privacy stream.<br>This routines invocation could result in the invocation of the block-ready callback routine supplied during the creation of the stream.</td>
</tr>
<tr>
<td><b>EndStream</b></td>
<td>Routine to terminate/end the stream - whatever unencrypted/undecrypted data is present in the stream buffers are padded and finally encrypted/decrypted.<br>This routines invocation always results in the invocation of the block-ready callback routine supplied during the creation of the stream.</td>
</tr>
<tr>
<td><b>StreamDestroy</b></td>
<td>Routine to free up the resources used for this privacy stream.</td>
</tr>
</tbody></table>

<aside class="notice"><b><u>Session Scope</u></b> -
<br>When used with session scope, the API-Client should use the default CipherSpec/Salt so that service provider can make use of the encrypted data (remember?)
</aside>

<h1 id="basic-api-pause-resume">Basic API - Pause-Resume</h1>

<p>The pause and resume routines make it possible to persist the <i>in-session</i> state of the API runtime and restore the runtime from the previously persisted state.</p>

<p>This is useful in case of limited configuration devices and platforms - such as smartphone device platforms like Android, iOS and WindowsPhone. In these platforms, a running application could be swapped out of memory due to &#39;crowding&rsquo; by other running applications, only to be swapped back in when the user chooses to access that application again. </p>
<pre class="highlight c"><code><span class="kt">int</span>
<span class="n">corePauseRuntime</span>
<span class="p">(</span><span class="kt">void</span><span class="o">*</span>  <span class="n">pvRuntimeCtx</span><span class="p">,</span>
 <span class="kt">char</span><span class="o">**</span> <span class="n">ppvState</span><span class="p">,</span>
 <span class="kt">int</span><span class="o">*</span>   <span class="n">pnStateSize</span><span class="p">);</span>

<span class="kt">int</span>
<span class="n">coreResumeRuntime</span>
<span class="p">(</span><span class="kt">void</span><span class="o">**</span> <span class="n">ppvRuntimeCtx</span><span class="p">,</span>
 <span class="kt">char</span><span class="o">*</span>  <span class="n">pvState</span><span class="p">,</span>
 <span class="kt">int</span>    <span class="n">nStateSize</span><span class="p">,</span>
 <span class="n">core_callbacks_t</span><span class="o">*</span>
        <span class="n">pCallbacks</span><span class="p">,</span>
 <span class="n">proxy_settings_t</span><span class="o">*</span>
        <span class="n">pProxySettings</span><span class="p">,</span>
 <span class="kt">void</span><span class="o">*</span>  <span class="n">pvAppCtx</span><span class="p">);</span>
</code></pre>
<pre class="highlight java"><code><span class="kd">public</span> <span class="kd">abstract</span> <span class="kd">class</span> <span class="nc">RDNA</span> <span class="o">{</span>
  <span class="c1">//..</span>
  <span class="kd">public</span> <span class="kd">abstract</span> <span class="n">RDNAStatus</span><span class="o">&lt;</span><span class="kt">byte</span><span class="o">[]&gt;</span> <span class="n">pauseRuntime</span><span class="o">();</span>

  <span class="kd">public</span> <span class="kd">static</span> <span class="n">RDNAStatus</span><span class="o">&lt;</span><span class="n">RDNA</span><span class="o">&gt;</span> <span class="n">resumeRuntime</span><span class="o">(</span>
         <span class="kt">byte</span><span class="o">[]</span> <span class="n">state</span><span class="o">,</span> <span class="n">RDNACallbacks</span> <span class="n">callbacks</span><span class="o">,</span>
         <span class="n">RDNAProxySettings</span> <span class="n">proxySettings</span><span class="o">,</span> <span class="n">Object</span> <span class="n">appCtx</span><span class="o">);</span>
  <span class="c1">//..</span>
<span class="o">}</span>
</code></pre>
<pre class="highlight objective_c"><code><span class="k">@interface</span> <span class="nc">RDNA</span> <span class="p">:</span> <span class="nc">NSObject</span>
  <span class="c1">//..
</span>  <span class="k">-</span> <span class="p">(</span><span class="kt">int</span><span class="p">)</span><span class="nf">pauseRuntime</span><span class="p">:(</span><span class="n">NSMutableData</span> <span class="o">**</span><span class="p">)</span><span class="nv">state</span><span class="p">;</span>

  <span class="k">+</span> <span class="p">(</span><span class="kt">int</span><span class="p">)</span><span class="nf">resumeRuntime</span><span class="p">:(</span><span class="n">RDNA</span> <span class="o">**</span><span class="p">)</span><span class="nv">ppRuntimeCtx</span>
            <span class="nf">SavedState</span><span class="p">:(</span><span class="n">NSData</span> <span class="o">*</span><span class="p">)</span><span class="nv">state</span>
             <span class="nf">Callbacks</span><span class="p">:(</span><span class="n">id</span><span class="o">&lt;</span><span class="n">RDNACallbacks</span><span class="o">&gt;</span><span class="p">)</span><span class="nv">callbacks</span>
         <span class="nf">ProxySettings</span><span class="p">:(</span><span class="n">RDNAProxySettings</span> <span class="o">*</span><span class="p">)</span><span class="nv">proxySettings</span>
            <span class="nf">AppContext</span><span class="p">:(</span><span class="n">id</span><span class="p">)</span><span class="nv">appCtx</span><span class="p">;</span>
  <span class="c1">//..
</span><span class="k">@end</span>
</code></pre>
<pre class="highlight cpp"><code><span class="k">class</span> <span class="nc">RDNA</span>
<span class="p">{</span>
<span class="k">public</span><span class="o">:</span>
  <span class="c1">//..
</span>  <span class="kt">int</span>
  <span class="n">pauseRuntime</span>
  <span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="o">&amp;</span> <span class="n">state</span><span class="p">);</span>

  <span class="k">static</span> <span class="kt">int</span>
  <span class="n">resumeRuntime</span>
  <span class="p">(</span><span class="n">RDNA</span><span class="o">**</span>             <span class="n">ppRuntimeCtx</span><span class="p">,</span>
   <span class="n">std</span><span class="o">::</span><span class="n">string</span>        <span class="n">state</span><span class="p">,</span>
   <span class="n">RDNACallbacks</span><span class="o">*</span>     <span class="n">callbacks</span><span class="p">,</span>
   <span class="n">RDNAProxySettings</span><span class="o">*</span> <span class="n">proxySettings</span><span class="p">,</span> 
   <span class="kt">void</span><span class="o">*</span>              <span class="n">appCtx</span><span class="p">);</span>
  <span class="c1">//..
</span><span class="p">}</span>
</code></pre>

<table><thead>
<tr>
<th>Routine</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><b>PauseRuntime</b></td>
<td><li>State of API runtime is serialized and returned in output buffer.<li>Information in this buffer is encrypted and must be supplied <i>AS IS</i> back with the <code class="prettyprint">ResumeRuntme</code> routine call.<li><b>Initiates termination/cleanup of the API-runtime before returning</b></td>
</tr>
<tr>
<td><b>ResumeRuntime</b></td>
<td><li>The supplied buffer containing a previously saved runtime state is used to re-initialize the runtime to that saved state. <li>The callback routines from the API-client must again be supplied herewith - these are not serialized by <code class="prettyprint">PauseRuntime</code> since they are references to code blocks in memory and may not be valid across process re-invocations.<li><code class="prettyprint">StatusUpdate</code> callback is invoked to signal completion of the re-initialization.</td>
</tr>
</tbody></table>

<aside class="notice"><b>It is recommended that the API-client application further encrypt this information before storing it for later retrieval and restoration into the API-runtime</b></aside>

<h1 id="basic-api-information-getters">Basic API - Information Getters</h1>
<pre class="highlight c"><code><span class="k">const</span> <span class="kt">char</span><span class="o">*</span>
<span class="n">coreGetSdkVersion</span>
<span class="p">();</span>

<span class="n">e_core_error_t</span>
<span class="n">coreGetErrorInfo</span>
<span class="p">(</span><span class="kt">int</span> <span class="n">errorCode</span><span class="p">);</span>

<span class="kt">int</span>
<span class="n">coreGetSessionID</span>
<span class="p">(</span><span class="kt">void</span><span class="o">*</span>  <span class="n">pvRuntimeCtx</span><span class="p">,</span>
 <span class="kt">char</span><span class="o">**</span> <span class="n">ppcSessionId</span><span class="p">);</span>

<span class="kt">int</span>
<span class="n">coreGetAgentID</span>
<span class="p">(</span><span class="kt">void</span><span class="o">*</span>  <span class="n">pvRuntimeCtx</span><span class="p">,</span>
 <span class="kt">char</span><span class="o">**</span> <span class="n">ppcAgentID</span><span class="p">);</span>

<span class="kt">int</span>
<span class="n">coreGetDeviceID</span>
<span class="p">(</span><span class="kt">void</span><span class="o">*</span>  <span class="n">pvRuntimeCtx</span><span class="p">,</span>
 <span class="kt">char</span><span class="o">**</span> <span class="n">ppcDeviceID</span><span class="p">);</span>
</code></pre>
<pre class="highlight java"><code><span class="kd">public</span> <span class="kd">abstract</span> <span class="kd">class</span> <span class="nc">RDNA</span> <span class="o">{</span>
  <span class="c1">//..</span>
  <span class="kd">public</span> <span class="kd">static</span>
    <span class="n">String</span>
    <span class="n">getSDKVersion</span><span class="o">();</span>
  <span class="kd">public</span> <span class="kd">static</span>
    <span class="n">RDNAErrorID</span>
    <span class="n">getErrorInfo</span>
      <span class="o">(</span><span class="kt">int</span> <span class="n">errorCode</span><span class="o">);</span>
  <span class="kd">public</span> <span class="kd">abstract</span>
    <span class="n">RDNAStatus</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span>
    <span class="n">getSessionID</span><span class="o">();</span>
  <span class="kd">public</span> <span class="kd">abstract</span>
    <span class="n">RDNAStatus</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span>
    <span class="n">getAgentID</span><span class="o">();</span>
  <span class="kd">public</span> <span class="kd">abstract</span>
    <span class="n">RDNAStatus</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span>
    <span class="n">getDeviceID</span><span class="o">();</span>
  <span class="c1">//..</span>
<span class="o">}</span>
</code></pre>
<pre class="highlight objective_c"><code><span class="k">@interface</span> <span class="nc">RDNA</span> <span class="p">:</span> <span class="nc">NSObject</span>
  <span class="c1">//..
</span>  <span class="k">+</span> <span class="p">(</span><span class="n">NSString</span> <span class="o">*</span><span class="p">)</span><span class="n">getSDKVersion</span><span class="p">;</span>
  <span class="k">+</span> <span class="p">(</span><span class="n">RDNAErrorID</span><span class="p">)</span><span class="nf">getErrorInfo</span><span class="p">:(</span><span class="kt">int</span><span class="p">)</span><span class="nv">errorCode</span><span class="p">;</span>
  <span class="k">-</span> <span class="p">(</span><span class="kt">int</span><span class="p">)</span><span class="nf">getSessionID</span><span class="p">:(</span><span class="n">NSMutableString</span> <span class="o">**</span><span class="p">)</span><span class="nv">sessionID</span><span class="p">;</span>
  <span class="k">-</span> <span class="p">(</span><span class="kt">int</span><span class="p">)</span><span class="nf">getAgentID</span><span class="p">:(</span><span class="n">NSMutableString</span> <span class="o">**</span><span class="p">)</span><span class="nv">agentID</span><span class="p">;</span>
  <span class="k">-</span> <span class="p">(</span><span class="kt">int</span><span class="p">)</span><span class="nf">getDeviceID</span><span class="p">:(</span><span class="n">NSMutableString</span> <span class="o">**</span><span class="p">)</span><span class="nv">deviceID</span><span class="p">;</span>
  <span class="c1">//..
</span><span class="k">@end</span>
</code></pre>
<pre class="highlight cpp"><code><span class="k">class</span> <span class="nc">RDNA</span>
<span class="p">{</span>
<span class="k">public</span><span class="o">:</span>
  <span class="c1">//..
</span>  <span class="k">static</span> <span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="n">getSdkVersion</span><span class="p">();</span>
  <span class="k">static</span> <span class="n">RDNAErrorID</span> <span class="n">getErrorInfo</span><span class="p">(</span><span class="kt">int</span> <span class="n">errorCode</span><span class="p">);</span>
  <span class="kt">int</span> <span class="n">getSessionID</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="o">&amp;</span> <span class="n">sessionID</span><span class="p">);</span>
  <span class="kt">int</span> <span class="n">getAgentID</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="o">&amp;</span> <span class="n">agentID</span><span class="p">);</span>
  <span class="kt">int</span> <span class="n">getDeviceID</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="o">&amp;</span> <span class="n">deviceID</span><span class="p">);</span>
  <span class="c1">//..
</span><span class="p">}</span>
</code></pre>

<table><thead>
<tr>
<th>Routine</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><b>GetSdkVersion</b></td>
<td>Get the API-SDK version number</td>
</tr>
<tr>
<td><b>GetErrorInfo</b></td>
<td>Get the error information corresponding to an integer error code returned by any API. It returns back <code class="prettyprint">RDNAErrorID</code> which gives brief information of the error occured</td>
</tr>
<tr>
<td><b>GetSessionID</b></td>
<td>Get the session ID of the current initialized REL-ID session. Depending on the current state of the API-Runtime, the retrieved session ID will be either of the current application (PRIMARY) REL-ID session or of the current user (SECONDARY) REL-ID session.</td>
</tr>
<tr>
<td><b>GetAgentID</b></td>
<td>Get the Agent ID using which the REL-ID session is initialized</td>
</tr>
<tr>
<td><b>GetDeviceID</b></td>
<td>Get the device ID of the current device using which the REL-ID session is initialized</td>
</tr>
</tbody></table>

<h1 id="advanced-api">Advanced API</h1>

<p>The Advanced API, builds on top of the application (PRIMARY) REL-ID session, accomplishes end-user authentication, and further associates a mutually authenticated end-user to form the user (SECONDARY) REL-ID session.</p>

<aside class="notice">Note that all of the Advanced API routines may only be invoked once the Basic Initialization is successfully completed. This is because the primary function of the Advanced API is to perform end-user authentication on a previously established, valid 'PRIMARY&rsquo; session</aside>

<aside class="notice">These APIs is designed to allow complete flexibility to the API-client application to be able to specify/conduct its own method of user-authentication. <i><u>While the built-in behavior for these API routines in the REL-ID API-SDK and backend is specific albeit configurable, this behavior can be customized to the needs of the enterprise application</u></i>.</aside>

<p>Following API routines constitute the Advanced APIs of REL-ID API-SDK.</p>

<h2 id="checkcredential">CheckCredential</h2>

<p>This routine submits one or more user credentials (username/userID, passwords, responses to challenges etc) with the REL-ID backend, to authenticate the end-user. This can be used to -
 * To check the user status - whether this user requires authentication on this device, what authentication to perform for this user, whether the user is blocked (on this device and/or app, or otherwise).
 * To check the username and password.
 * To check the additional authentication credentials such as secret answer, captcha, etc </p>

<p>The result is one of the following - 
 * <b>FAILURE, &lt;reason&gt;</b>
 * <b>CHALLENGE, &lt;challenge&gt;</b>
 * <b>SUCCESS, &lt;eurelid&gt;</b></p>

<p>The result is informed to API-client via status update (core) / event notification (wrapper) callback routines. <br>Multiple successful invocations of this routine may be needed before receiving a <b>SUCCESS, &lt;eurelid&gt;</b> result from this routine, with the same challenge (retries) and/or different challenges (additional authentication).</p>
<pre class="highlight c"><code><span class="kt">int</span> <span class="n">coreCheckCredential</span>
<span class="p">(</span><span class="kt">void</span><span class="o">*</span> <span class="n">pvRuntimeCtx</span><span class="p">,</span>
 <span class="kt">char</span><span class="o">*</span> <span class="n">pcCredData</span><span class="p">,</span>
 <span class="kt">int</span> <span class="n">nCredDataLen</span><span class="p">);</span>
</code></pre>
<pre class="highlight java"><code><span class="kd">public</span> <span class="kd">abstract</span> <span class="kd">class</span> <span class="nc">RDNA</span> <span class="o">{</span>
  <span class="c1">//..</span>
  <span class="kd">public</span> <span class="kd">abstract</span> <span class="kt">int</span> <span class="n">checkCredential</span><span class="o">(</span><span class="n">String</span> <span class="n">credData</span><span class="o">);</span>
  <span class="c1">//..</span>
<span class="o">}</span>
</code></pre>
<pre class="highlight objective_c"><code><span class="k">@interface</span> <span class="nc">RDNA</span> <span class="p">:</span> <span class="nc">NSObject</span>
  <span class="c1">//..
</span>  <span class="k">-</span> <span class="p">(</span><span class="kt">int</span><span class="p">)</span><span class="nf">checkCredential</span><span class="p">:(</span><span class="n">NSString</span> <span class="o">*</span><span class="p">)</span><span class="nv">credData</span><span class="p">;</span>
  <span class="c1">//..
</span><span class="k">@end</span>
</code></pre>
<pre class="highlight cpp"><code><span class="k">class</span> <span class="nc">RDNA</span>
<span class="p">{</span>
<span class="k">public</span><span class="o">:</span>
  <span class="c1">//..
</span>  <span class="kt">int</span> <span class="n">checkCredential</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="n">credData</span><span class="p">);</span>
  <span class="c1">//..
</span><span class="p">}</span>
</code></pre>

<table><thead>
<tr>
<th>Argument&nbsp;[in/out]</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>API-Runtime Context [in]</td>
<td>Previously created and valid API runtime context reference</td>
</tr>
<tr>
<td>Cred Data [in]</td>
<td>End-user identity or credential data supplied as a single opaque ASCII-encoded blob (base64/&hellip;)<br>In case of username/userID validation, the API-client application can take in user identity information, via one or more fields of input used to form a structured/unstructured end-user identity - for example, [<corporate-id>.]<user-id> (internet banking), or <sol-id>.<user-id> (Finacle CBS), or <user-id>@<fqdn> / <domain>&lt;user-id (corporate intranet Windows domain user), etc.</td>
</tr>
</tbody></table>

<p>The following table explains the results of this API routine, which is notified to the API-client via the status update (core) / event notification (wrapper) callback routine.</p>

<table><thead>
<tr>
<th>Result</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><b>FAILURE,&nbsp;&lt;reason&gt;</b></td>
<td><b>&lt;reason&gt;</b> refers an exception to be reported to the API-client.<br>For example, the system is down, disk is full, the user/dev/agent is blocked/invalid, some policy check failed, etc.</td>
</tr>
<tr>
<td><b>CHALLENGE,&nbsp;&lt;challenge&gt;</b></td>
<td><b>&lt;challenge&gt;</b> is a blob containing information that the API-client application knows to process -<br><li>by displaying an appropriate challenge to the end-user operating the API-client app, with an appropriate CAPTCHA probably,<li>by accepting credential(s) in response to the challenge, and<li>by packaging the accepted credential(s) into another single opaque ASCII blob to be sent back to the REL-ID backend in another invocation of <code class="prettyprint">CheckCredential</code> API routine. Hence the API-Client must authenticate the response (credentials) received from the end-user, after having shown him/her the challenges received from the previous <code class="prettyprint">CheckCredential</code> routine invocation until it gets SUCCESS.</td>
</tr>
<tr>
<td><b>SUCCESS,&nbsp;&lt;eurelid&gt;</b></td>
<td><b>&lt;eurelid&gt;</b> is a blob containing the &rsquo;<u>encrypted User REL-ID</u>&rsquo; for the end-user.<li>Upon receiving this, the API-Client must unpack the user REL-ID and call the <code class="prettyprint">AuthenticateUser</code> routine.</td>
</tr>
</tbody></table>

<h2 id="authenticateuser">AuthenticateUser</h2>

<p>This routine accomplishes the end-user authentication, and further associates a mutually authenticated end-user to form the user (SECONDARY) REL-ID session. Upon receiving the <b>SUCCESS, &lt;eurelid&gt;</b> in the <code class="prettyprint">CheckCredential</code> routine, the API-Client must unpack the user REL-ID and call the <code class="prettyprint">AuthenticateUser</code> routine. Upon successful completion of this routine, 
 * a user REL-ID-authenticated session is established with the REL-ID platform backend, in a SECONDARY state 
 * the app session is subsided by saving its state, the services related to app session is shutdown
 * the services related to user session is started. </p>

<p>The result of this routine is informed to API-client via status update (core) / event notification (wrapper) callback routines.</p>
<pre class="highlight c"><code><span class="kt">int</span> <span class="n">coreAuthenticateUser</span>
<span class="p">(</span><span class="kt">void</span><span class="o">*</span> <span class="n">pvRuntimeCtx</span><span class="p">,</span>
 <span class="kt">char</span><span class="o">*</span> <span class="n">pcEuRelID</span><span class="p">,</span>
 <span class="kt">int</span> <span class="n">nEuRelIDLen</span><span class="p">);</span>
</code></pre>
<pre class="highlight java"><code><span class="kd">public</span> <span class="kd">abstract</span> <span class="kd">class</span> <span class="nc">RDNA</span> <span class="o">{</span>
  <span class="c1">//..</span>
  <span class="kd">public</span> <span class="kd">abstract</span> <span class="kt">int</span> <span class="n">authenticateUser</span><span class="o">(</span><span class="n">String</span> <span class="n">euRelID</span><span class="o">);</span>
  <span class="c1">//..</span>
<span class="o">}</span>
</code></pre>
<pre class="highlight objective_c"><code><span class="k">@interface</span> <span class="nc">RDNA</span> <span class="p">:</span> <span class="nc">NSObject</span>
  <span class="c1">//..
</span>  <span class="k">-</span> <span class="p">(</span><span class="kt">int</span><span class="p">)</span><span class="nf">authenticateUser</span><span class="p">:(</span><span class="n">NSString</span> <span class="o">*</span><span class="p">)</span><span class="nv">euRelID</span><span class="p">;</span>
  <span class="c1">//..
</span><span class="k">@end</span>
</code></pre>
<pre class="highlight cpp"><code><span class="k">class</span> <span class="nc">RDNA</span>
<span class="p">{</span>
<span class="k">public</span><span class="o">:</span>
  <span class="c1">//..
</span>  <span class="kt">int</span> <span class="n">authenticateUser</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="n">euRelID</span><span class="p">);</span>
  <span class="c1">//..
</span><span class="p">}</span>
</code></pre>

<table><thead>
<tr>
<th>Argument&nbsp;[in/out]</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>API-Rumtime Context [in]</td>
<td>Previously created and valid API runtime context reference</td>
</tr>
<tr>
<td>EuRelID [in]</td>
<td>Unpacked end-user REL-ID with which a user REL-ID-authenticated session can be established with the REL-ID platform backend.</td>
</tr>
</tbody></table>

<p>Similar to the result provided in the callback of <code class="prettyprint">Initialize</code> routine, the callback of this routine as well provides the result of this routine and list of services started with respect to user (SECONDARY) REL-ID session.</p>

<h2 id="updatecredential">UpdateCredential</h2>

<p>The purpose of this routine is to update one or more credentials of the end-user. This routine can only be invoked if <code class="prettyprint">AuthenticateUser</code> routine has been successfully completed. Pretty much all the relevant credentials of the end-user - secret question(s) and answer(s), one-time-use access code generation seeds, primary password(s), device binding to user-app etc - may be updated using this routine.
The result is informed to API-client via status update (core) / event notification (wrapper) callback routines.</p>
<pre class="highlight c"><code><span class="kt">int</span> <span class="n">coreUpdateCredential</span>
<span class="p">(</span><span class="kt">void</span><span class="o">*</span> <span class="n">pvRuntimeCtx</span><span class="p">,</span>
 <span class="kt">char</span><span class="o">*</span> <span class="n">pcCredData</span><span class="p">,</span>
 <span class="kt">int</span> <span class="n">nCredDataLen</span><span class="p">);</span>
</code></pre>
<pre class="highlight java"><code><span class="kd">public</span> <span class="kd">abstract</span> <span class="kd">class</span> <span class="nc">RDNA</span> <span class="o">{</span>
  <span class="c1">//..</span>
  <span class="kd">public</span> <span class="kd">abstract</span> <span class="kt">int</span> <span class="n">updateCredential</span><span class="o">(</span><span class="n">String</span> <span class="n">credData</span><span class="o">);</span>
  <span class="c1">//..</span>
<span class="o">}</span>
</code></pre>
<pre class="highlight objective_c"><code><span class="k">@interface</span> <span class="nc">RDNA</span> <span class="p">:</span> <span class="nc">NSObject</span>
  <span class="c1">//..
</span>  <span class="k">-</span> <span class="p">(</span><span class="kt">int</span><span class="p">)</span><span class="nf">updateCredential</span><span class="p">:(</span><span class="n">NSString</span> <span class="o">*</span><span class="p">)</span><span class="nv">credData</span><span class="p">;</span>
  <span class="c1">//..
</span><span class="k">@end</span>
</code></pre>
<pre class="highlight cpp"><code><span class="k">class</span> <span class="nc">RDNA</span>
<span class="p">{</span>
<span class="k">public</span><span class="o">:</span>
  <span class="c1">//..
</span>  <span class="kt">int</span> <span class="n">updateCredential</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="n">credData</span><span class="p">);</span>
  <span class="c1">//..
</span><span class="p">}</span>
</code></pre>

<table><thead>
<tr>
<th>Argument&nbsp;[in/out]</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>API-Rumtime Context [in]</td>
<td>Previously created and valid API runtime context reference</td>
</tr>
<tr>
<td>Cred data [in]</td>
<td>End-user identity or credential data supplied as a single opaque ASCII-encoded blob (base64/&hellip;)<br>This could contain one or more credential to be updated.</td>
</tr>
</tbody></table>

<p>The result of this API routine is just a plain <b>SUCCESS</b> or <b>FAILURE, &lt;reason&gt;</b>.</p>

<h2 id="getconfig">GetConfig</h2>

<p>The purpose of this routine is to get the configuration (if any) needed for API-Client from the REL-ID backend server so that the behavior of the API-Client can be made configurable in some use cases. For example - password policy to be validated when password is set/changed, customization settings, other application/user level settings, etc. The result is informed to API-client via status update (core) / event notification (wrapper) callback routines.</p>
<pre class="highlight c"><code><span class="kt">int</span> <span class="n">coreGetConfig</span>
<span class="p">(</span><span class="kt">void</span><span class="o">*</span> <span class="n">pvRuntimeCtx</span><span class="p">,</span>
 <span class="kt">char</span><span class="o">*</span> <span class="n">pcConfigRequest</span><span class="p">,</span>
 <span class="kt">int</span> <span class="n">nConfigRequestLen</span><span class="p">);</span>
</code></pre>
<pre class="highlight java"><code><span class="kd">public</span> <span class="kd">abstract</span> <span class="kd">class</span> <span class="nc">RDNA</span> <span class="o">{</span>
  <span class="c1">//..</span>
  <span class="kd">public</span> <span class="kd">abstract</span> <span class="kt">int</span> <span class="n">getConfig</span><span class="o">(</span><span class="n">String</span> <span class="n">configRequest</span><span class="o">);</span>
  <span class="c1">//..</span>
<span class="o">}</span>
</code></pre>
<pre class="highlight objective_c"><code><span class="k">@interface</span> <span class="nc">RDNA</span> <span class="p">:</span> <span class="nc">NSObject</span>
  <span class="c1">//..
</span>  <span class="k">-</span> <span class="p">(</span><span class="kt">int</span><span class="p">)</span><span class="nf">getConfig</span><span class="p">:(</span><span class="n">NSString</span> <span class="o">*</span><span class="p">)</span><span class="nv">configRequest</span><span class="p">;</span>
  <span class="c1">//..
</span><span class="k">@end</span>
</code></pre>
<pre class="highlight cpp"><code><span class="k">class</span> <span class="nc">RDNA</span>
<span class="p">{</span>
<span class="k">public</span><span class="o">:</span>
  <span class="c1">//..
</span>  <span class="kt">int</span> <span class="n">getConfig</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="n">configRequest</span><span class="p">);</span>
  <span class="c1">//..
</span><span class="p">}</span>
</code></pre>

<table><thead>
<tr>
<th>Argument&nbsp;[in/out]</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>API-Rumtime Context [in]</td>
<td>Previously created and valid API runtime context reference</td>
</tr>
<tr>
<td>Config Request [in]</td>
<td>The config request data supplied as a single opaque ASCII-encoded blob (base64/&hellip;)<br>This could contain the identity (agent, user, etc) and/or set of configuration key names for which the configuration request is made.</td>
</tr>
</tbody></table>

<p>The result of this API routine is just a plain <b>SUCCESS, &lt;configuration data&gt;</b> or <b>FAILURE, &lt;reason&gt;</b>.</p>

      </div>
      <div class="dark-box">
          <div class="lang-selector">
                <a href="#" data-language-name="c">ANSI C</a>
                <a href="#" data-language-name="java">Java</a>
                <a href="#" data-language-name="objective_c">Objective C</a>
                <a href="#" data-language-name="cpp">C++</a>
          </div>
      </div>
    </div>
  </body>
</html>
